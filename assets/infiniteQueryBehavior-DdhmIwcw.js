var j=a=>{throw TypeError(a)};var E=(a,t,e)=>t.has(a)||j("Cannot "+e);var r=(a,t,e)=>(E(a,t,"read from private field"),e?e.call(a):t.get(a)),F=(a,t,e)=>t.has(a)?j("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),y=(a,t,e,s)=>(E(a,t,"write to private field"),s?s.call(a,e):t.set(a,e),e),g=(a,t,e)=>(E(a,t,"access private method"),e);import{R as z,r as J,n as H,a as V,s as X,t as Y,c as Z,b as _,e as B,i as M,d as x,f as tt,g as et}from"./QueryClientProvider-BdRu95_o.js";var U,D,l,o,O,C,f,m,N,nt=(N=class extends z{constructor(t){super();F(this,f);F(this,U);F(this,D);F(this,l);F(this,o);F(this,O);F(this,C);y(this,C,!1),y(this,O,t.defaultOptions),this.setOptions(t.options),this.observers=[],y(this,l,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,y(this,U,at(this.options)),this.state=t.state??r(this,U),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=r(this,o))==null?void 0:t.promise}setOptions(t){this.options={...r(this,O),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&r(this,l).remove(this)}setData(t,e){const s=J(this.state.data,t,this.options);return g(this,f,m).call(this,{data:s,type:"success",dataUpdatedAt:e==null?void 0:e.updatedAt,manual:e==null?void 0:e.manual}),s}setState(t,e){g(this,f,m).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var s,u;const e=(s=r(this,o))==null?void 0:s.promise;return(u=r(this,o))==null||u.cancel(t),e?e.then(H).catch(H):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(r(this,U))}isActive(){return this.observers.some(t=>V(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===X||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Y(this.state.dataUpdatedAt,t)}onFocus(){var e;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(e=r(this,o))==null||e.continue()}onOnline(){var e;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(e=r(this,o))==null||e.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),r(this,l).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(r(this,o)&&(r(this,C)?r(this,o).cancel({revert:!0}):r(this,o).cancelRetry()),this.scheduleGc()),r(this,l).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||g(this,f,m).call(this,{type:"invalidate"})}fetch(t,e){var S,w,A;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(e!=null&&e.cancelRefetch))this.cancel({silent:!0});else if(r(this,o))return r(this,o).continueRetry(),r(this,o).promise}if(t&&this.setOptions(t),!this.options.queryFn){const i=this.observers.find(n=>n.options.queryFn);i&&this.setOptions(i.options)}const s=new AbortController,u=i=>{Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(y(this,C,!0),s.signal)})},R=()=>{const i=B(this.options,e),n={queryKey:this.queryKey,meta:this.meta};return u(n),y(this,C,!1),this.options.persister?this.options.persister(i,n,this):i(n)},c={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:R};u(c),(S=this.options.behavior)==null||S.onFetch(c,this),y(this,D,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((w=c.fetchOptions)==null?void 0:w.meta))&&g(this,f,m).call(this,{type:"fetch",meta:(A=c.fetchOptions)==null?void 0:A.meta});const p=i=>{var n,v,P,h;M(i)&&i.silent||g(this,f,m).call(this,{type:"error",error:i}),M(i)||((v=(n=r(this,l).config).onError)==null||v.call(n,i,this),(h=(P=r(this,l).config).onSettled)==null||h.call(P,this.state.data,i,this)),this.scheduleGc()};return y(this,o,Z({initialPromise:e==null?void 0:e.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:i=>{var n,v,P,h;if(i===void 0){p(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(i)}catch(q){p(q);return}(v=(n=r(this,l).config).onSuccess)==null||v.call(n,i,this),(h=(P=r(this,l).config).onSettled)==null||h.call(P,i,this.state.error,this),this.scheduleGc()},onError:p,onFail:(i,n)=>{g(this,f,m).call(this,{type:"failed",failureCount:i,error:n})},onPause:()=>{g(this,f,m).call(this,{type:"pause"})},onContinue:()=>{g(this,f,m).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),r(this,o).start()}},U=new WeakMap,D=new WeakMap,l=new WeakMap,o=new WeakMap,O=new WeakMap,C=new WeakMap,f=new WeakSet,m=function(t){const e=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...st(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const u=t.error;return M(u)&&u.revert&&r(this,D)?{...r(this,D),fetchStatus:"idle"}:{...s,error:u,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=e(this.state),_.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),r(this,l).notify({query:this,type:"updated",action:t})})},N);function st(a,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:x(t.networkMode)?"fetching":"paused",...a===void 0&&{error:null,status:"pending"}}}function at(a){const t=typeof a.initialData=="function"?a.initialData():a.initialData,e=t!==void 0,s=e?typeof a.initialDataUpdatedAt=="function"?a.initialDataUpdatedAt():a.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}function ot(a){return{onFetch:(t,e)=>{var A,i,n,v,P;const s=t.options,u=(n=(i=(A=t.fetchOptions)==null?void 0:A.meta)==null?void 0:i.fetchMore)==null?void 0:n.direction,R=((v=t.state.data)==null?void 0:v.pages)||[],c=((P=t.state.data)==null?void 0:P.pageParams)||[];let p={pages:[],pageParams:[]},S=0;const w=async()=>{let h=!1;const q=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(t.signal.aborted?h=!0:t.signal.addEventListener("abort",()=>{h=!0}),t.signal)})},W=B(t.options,t.fetchOptions),I=async(d,b,K)=>{if(h)return Promise.reject();if(b==null&&d.pages.length)return Promise.resolve(d);const k={queryKey:t.queryKey,pageParam:b,direction:K?"backward":"forward",meta:t.options.meta};q(k);const $=await W(k),{maxPages:G}=t.options,Q=K?tt:et;return{pages:Q(d.pages,$,G),pageParams:Q(d.pageParams,b,G)}};if(u&&R.length){const d=u==="backward",b=d?L:T,K={pages:R,pageParams:c},k=b(s,K);p=await I(K,k,d)}else{const d=a??R.length;do{const b=S===0?c[0]??s.initialPageParam:T(s,p);if(S>0&&b==null)break;p=await I(p,b),S++}while(S<d)}return p};t.options.persister?t.fetchFn=()=>{var h,q;return(q=(h=t.options).persister)==null?void 0:q.call(h,w,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e)}:t.fetchFn=w}}}function T(a,{pages:t,pageParams:e}){const s=t.length-1;return t.length>0?a.getNextPageParam(t[s],t,e[s],e):void 0}function L(a,{pages:t,pageParams:e}){var s;return t.length>0?(s=a.getPreviousPageParam)==null?void 0:s.call(a,t[0],t,e[0],e):void 0}function ut(a,t){return t?T(a,t)!=null:!1}function ht(a,t){return!t||!a.getPreviousPageParam?!1:L(a,t)!=null}export{nt as Q,ht as a,st as f,ut as h,ot as i};
