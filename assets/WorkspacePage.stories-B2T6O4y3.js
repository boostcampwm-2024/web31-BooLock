import{j as o}from"./jsx-runtime-DR9Q75dM.js";import"./GuidesBox-Bzb74nGW.js";import{u as S,Q as D,b as P,a as b,I}from"./ImageTagModal-BCWunpTr.js";import"./HomeHeader-BWTUlWpY.js";import"./WorkspaceList-BRe4hC8a.js";import"./WorkspaceHeader-DzWhtxVS.js";import"./EmptyWorkspace-kwRUb5w-.js";import"./WorkspaceGrid-vyyREuel.js";import"./WorkspaceModal-CrS0f84j.js";import"./PreviewBox-Bef_8RUk.js";import{W as B}from"./WorkspacePageHeader-BJDLVERN.js";import"./CssCategoryBar-4N4Aikh_.js";import"./CssOptionItemList-BTnakjy6.js";import"./CssPropsSelectBoxHeader-CDkzBjdc.js";import{r as w,u as E,b as M,f as O,g as x,h as W,i as N}from"./useImageModalStore-axAWps0d.js";import{B as k,f as _,g as F,e as H,h as Q,w as R,i as q}from"./HoveredEmptyWorkspace-B3fl6QFz.js";import{_ as A}from"./index-D1AAVYfs.js";import{r as m}from"./index-DRjF_FHU.js";import{a as T,b as U}from"./index-x70cJmE6.js";import{H as K}from"./index.esm-zFJIz-4f.js";import"./plus-dioM8lOZ.js";import"./SquareButton-hj7tViqk.js";import"./Logo-DlHd6_yt.js";import"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import{L as z}from"./Loading-CVQUyNmW.js";import"./Spinner-D5uwPRVI.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import{N as G}from"./NotFound-BOB6oesK.js";import{u as J}from"./useCoachMarkStore-BoVLoTcU.js";import"./GuideVideo-MGmf4GR2.js";import"./WorkspaceLoadError-BuktD2D2.js";import"./NotHoveredEmptyWorkspace-loFxOJJf.js";import"./CssCategoryButton-CZecLCOO.js";import"./client-Dbo3a7kb.js";import"./ModalConfirm-BDuYJlbG.js";import"./QueryClientProvider-BdRu95_o.js";import"./infiniteQueryBehavior-DdhmIwcw.js";import"./question-BUxmZXrP.js";import"./cssCategoryList-CHFX1k4S.js";function $(e,t){return S(e,D)}const V=e=>{k[e]||(k[e]={init:function(){this.appendDummyInput().appendField(new _(w(e)),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss")}})},X=e=>{const t=q(),r=F()||H(),{initCssPropertyObj:n}=E(),{initClassBlockList:a}=M(),{setCanvasInfo:c,setName:p}=O(),{resetChangedStatusState:i}=x(),{setIsResetCssChecked:u}=W(),{setInitialImageMap:v,setInitialImageList:y}=N(),{data:s,isPending:L,isError:f}=$({queryKey:R.detail(e),queryFn:()=>t.getWorkspace(r,e)});return m.useEffect(()=>{i()},[]),m.useEffect(()=>{if(f){A.error("워크스페이스 정보 불러오기 실패");return}s&&s.workspaceDto&&(p(s.workspaceDto.name),Object.keys(s.workspaceDto.totalCssPropertyObj).forEach(d=>{V(d)}),n(s.workspaceDto.totalCssPropertyObj),a(Object.keys(s.workspaceDto.totalCssPropertyObj).map(d=>w(d))),c(s.workspaceDto.canvas),Q.contents=s.workspaceDto.classBlockList?JSON.parse(s.workspaceDto.classBlockList):[],u(s.workspaceDto.isCssReset),v(s.workspaceDto.imageMap),y(s.workspaceDto.imageList))},[f,s]),{data:s,isPending:L,isError:f}},Y=()=>{const{isBlockChanged:e,isCssChanged:t}=x();let r=T(({currentLocation:i,nextLocation:u})=>i.pathname!==u.pathname&&(e||t));const n="저장하지 않은 변경사항이 있습니다. 정말로 떠나시겠습니까?";m.useEffect(()=>{r.state==="blocked"&&(window.confirm(n)?r.proceed():r.reset())},[r.state,e,t]);const a=i=>{i.preventDefault()},c=()=>{window.addEventListener("beforeunload",a)},p=()=>{window.removeEventListener("beforeunload",a)};m.useEffect(()=>(e||t?c():p(),()=>{p()}),[e,t])},j=()=>{const{workspaceId:e}=U(),{isPending:t,isError:r}=X(e);Y();const{isCoachMarkOpen:n,openCoachMark:a,closeCoachMark:c}=J();return r?o.jsx(G,{}):(m.useLayoutEffect(()=>{localStorage.getItem("isCoachMarkDismissed")?c():a()},[]),o.jsxs(o.Fragment,{children:[o.jsxs(K,{children:[o.jsx("title",{children:"BooLock - 작업 공간"}),o.jsx("meta",{name:"description",content:`작업 공간 ID: ${e}에서 HTML과 CSS를 연습해보세요.`})]}),o.jsxs("div",{className:"flex h-screen flex-col",children:[t&&o.jsx(z,{}),n&&o.jsx(P,{}),o.jsx(B,{}),o.jsx(b,{})]}),o.jsx(I,{})]}))};j.__docgenInfo={description:`@description
워크스페이스 페이지 컴포넌트`,methods:[],displayName:"WorkspacePage"};const Re={title:"pages/WorkspacePage",component:j,parameters:{layout:"fullscreen"},decorators:[e=>o.jsx("div",{className:"h-screen w-screen",children:o.jsx(e,{})})],tags:["autodocs"]},l={args:{}};var g,C,h;l.parameters={...l.parameters,docs:{...(g=l.parameters)==null?void 0:g.docs,source:{originalSource:`{
  args: {
    // propsname: value,
  }
}`,...(h=(C=l.parameters)==null?void 0:C.docs)==null?void 0:h.source}}};const qe=["Default"];export{l as Default,qe as __namedExportsOrder,Re as default};
