import{j as t}from"./jsx-runtime-DR9Q75dM.js";import"./GuidesBox-Cxg-NyPq.js";import"./HomeHeader-CtDmwvKv.js";import"./WorkspaceList-CuKwgdyC.js";import"./WorkspaceHeader-D6A2IvRQ.js";import"./EmptyWorkspace-BJfiE-yY.js";import"./WorkspaceGrid-vyyREuel.js";import{u as w,Q as x,a as y}from"./CssPropsSelectBox-D-BAIIxS.js";import"./WorkspaceModal-BuMWCAzH.js";import"./PreviewBox-DG1vgLsh.js";import{W as L}from"./WorkspacePageHeader-DHACe1Ro.js";import"./CssCategoryBar-C9PVVBjF.js";import"./CssOptionItemList-BmVxWGJ7.js";import"./CssPropsSelectBoxHeader-FDzpEImP.js";import{B as d,c as P,g as S,d as b,w as B,e as D}from"./HoveredEmptyWorkspace-bN-MEOQ6.js";import{_ as E}from"./index-D1AAVYfs.js";import{u as W,b as O,d as I,e as C,f as _}from"./useWorkspaceStore-CrNgioXB.js";import"./Spinner-QuWSqHI9.js";import{r as p}from"./index-DRjF_FHU.js";import{a as F,b as H}from"./index-x70cJmE6.js";import{H as N}from"./index.esm-zFJIz-4f.js";import"./CircleButton-CZ-LhlOb.js";import"./SquareButton-hj7tViqk.js";import"./Logo-Ca0csvGK.js";import"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import{L as Q}from"./Loading-CVQUyNmW.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import"./Select-BczipgGO.js";import{N as R}from"./NotFound-BJYOfdeH.js";import"./GuideVideo-MGmf4GR2.js";import"./WorkspaceLoadError-FmbY_INt.js";import"./NotHoveredEmptyWorkspace-CddEnm-X.js";import"./RedoButton-a0Wu9pAj.js";import"./UndoButton-BPk5eWmJ.js";import"./CssCategoryButton-kLrWYMB7.js";import"./client-Dbo3a7kb.js";import"./QueryClientProvider-BdRu95_o.js";import"./infiniteQueryBehavior-DdhmIwcw.js";import"./ModalConfirm-D4PzhGiJ.js";import"./cssCategoryList-CfnxYM_i.js";import"./plus-DWHtmhlY.js";import"./question-CX5dqjCQ.js";function q(e,o){return w(e,x)}const A=e=>{d[e]||(d[e]={init:function(){this.appendDummyInput().appendField(new P(e),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss")}})},K=e=>{const o=D(),r=S(),{initCssPropertyObj:m}=W(),{initClassBlockList:n}=O(),{setCanvasInfo:u}=I(),{resetChangedStatusState:i}=C(),{setIsResetCssChecked:a}=_(),{data:s,isPending:j,isError:l}=q({queryKey:B.detail(e),queryFn:()=>o.getWorkspace(r,e)});return p.useEffect(()=>{i()},[]),p.useEffect(()=>{if(l){E.error("워크스페이스 정보 불러오기 실패");return}s&&s.workspaceDto&&(m(s.workspaceDto.totalCssPropertyObj),n(Object.keys(s.workspaceDto.totalCssPropertyObj)),u(s.workspaceDto.canvas),b.contents=s.workspaceDto.classBlockList?JSON.parse(s.workspaceDto.classBlockList):[],a(s.workspaceDto.isCssReset),Object.keys(s.workspaceDto.totalCssPropertyObj).forEach(v=>{A(v)}))},[l,s]),{data:s,isPending:j,isError:l}},T=()=>{const{isBlockChanged:e,isCssChanged:o}=C();let r=F(({currentLocation:a,nextLocation:s})=>a.pathname!==s.pathname&&(e||o));const m="저장하지 않은 변경사항이 있습니다. 정말로 떠나시겠습니까?";p.useEffect(()=>{r.state==="blocked"&&(window.confirm(m)?r.proceed():r.reset())},[r.state,e,o]);const n=a=>{a.preventDefault()},u=()=>{window.addEventListener("beforeunload",n)},i=()=>{window.removeEventListener("beforeunload",n)};p.useEffect(()=>(e||o?u():i(),()=>{i()}),[e,o])},h=()=>{const{workspaceId:e}=H(),{isPending:o,isError:r}=K(e);return T(),r?t.jsx(R,{}):t.jsxs(t.Fragment,{children:[t.jsxs(N,{children:[t.jsx("title",{children:"BooLock - 작업 공간"}),t.jsx("meta",{name:"description",content:`작업 공간 ID: ${e}에서 HTML과 CSS를 연습해보세요.`})]}),t.jsxs("div",{className:"flex h-screen flex-col",children:[o&&t.jsx(Q,{}),t.jsx(L,{}),t.jsx(y,{})]})]})};h.__docgenInfo={description:`@description
워크스페이스 페이지 컴포넌트`,methods:[],displayName:"WorkspacePage"};const _e={title:"pages/WorkspacePage",component:h,parameters:{layout:"fullscreen"},decorators:[e=>t.jsx("div",{className:"h-screen w-screen",children:t.jsx(e,{})})],tags:["autodocs"]},c={args:{}};var f,k,g;c.parameters={...c.parameters,docs:{...(f=c.parameters)==null?void 0:f.docs,source:{originalSource:`{
  args: {
    // propsname: value,
  }
}`,...(g=(k=c.parameters)==null?void 0:k.docs)==null?void 0:g.source}}};const Fe=["Default"];export{c as Default,Fe as __namedExportsOrder,_e as default};
