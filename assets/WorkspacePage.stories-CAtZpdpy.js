import{j as t}from"./jsx-runtime-DR9Q75dM.js";import"./Banner-Cmxe5cZT.js";import"./HomeHeader-aS3-1j3a.js";import"./WorkspaceList-CGvzvR-L.js";import"./WorkspaceHeader-DgeOwXqV.js";import"./EmptyWorkspace-DbTnZ83f.js";import"./WorkspaceGrid-C2jJPMUx.js";import{u as y,Q as D,a as P}from"./CssPropsSelectBox-B9Yf0Wt6.js";import"./WorkspaceModal-DL6fl-7G.js";import"./PreviewBox-LqHZF4NG.js";import{C as b}from"./CoachMark-J9Fxtz9u.js";import"./WorkspaceHeaderButtons-B5Zs8EO7.js";import{W as I}from"./WorkspacePageHeader-DmppYJNE.js";import"./CssCategoryBar-x2EoHRHt.js";import"./CssOptionItemList-B4MesN8S.js";import"./CssPropsSelectBoxHeader-ChzGpnlm.js";import{I as M}from"./ImageTagModal-lJwU6WY3.js";import{r as x,u as B,c as E,f as O,i as w,g as W,a as N}from"./html2canvas.esm-D1fnD2iC.js";import{B as k,i as R,j as _,f as F,h as H,k as Q,w as T,l as q}from"./HoveredEmptyWorkspace-CGs6xzK0.js";import{_ as A}from"./index-D1AAVYfs.js";import{r as m}from"./index-DRjF_FHU.js";import{a as U,b as K}from"./index-x70cJmE6.js";import{H as X}from"./index.esm-zFJIz-4f.js";import"./plus-C7enkl2d.js";import"./SquareButton-eIFPi1Hz.js";import"./Logo-DlHd6_yt.js";import"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import{L as z}from"./Loading-CVQUyNmW.js";import"./Spinner-CHbqakIa.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import{N as G}from"./NotFound-BAI4UXuN.js";import{u as J}from"./useCoachMarkStore-DI07xEZl.js";import"./WorkspaceLoadError-BuktD2D2.js";import"./NotHoveredEmptyWorkspace-loFxOJJf.js";import"./CssCategoryButton-D2idemFI.js";import"./client-Dbo3a7kb.js";import"./ImageTagModalHeader-DRiIRUzt.js";import"./ImageTagModalImg-BJAMLe19.js";import"./ImageTagModalButton-DJiJ58eG.js";import"./ImageTagModalListItem-D30WR0c8.js";import"./QueryClientProvider-BdRu95_o.js";import"./infiniteQueryBehavior-DdhmIwcw.js";import"./ModalConfirm-BDuYJlbG.js";import"./CodeViewer-BigeaaPp.js";import"./CodeContent-DoxBelqC.js";import"./CodeViewer.module-CZ8GGqUa.js";import"./LineNumbers-eZdDlBqZ.js";import"./question-BUxmZXrP.js";import"./cssCategoryList-CHFX1k4S.js";import"./react-72mb-naO.js";import"./ErrorContent-C2U9ss5D.js";function V(e,o){return y(e,D)}const $=e=>{k[e]||(k[e]={init:function(){this.appendDummyInput().appendField(new R(x(e)),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss"),this.showContextMenu=o=>{if(this.getSvgRoot().transform.baseVal[0].matrix.e!==8)return;const a=this.generateContextMenu();_.show(o,a,this.RTL)}}})},Y=e=>{const o=q(),r=F()||H(),{initCssPropertyObj:a}=B(),{initClassBlockList:i}=E(),{setCanvasInfo:c,setName:p}=O(),{resetChangedStatusState:n}=w(),{setIsResetCssChecked:l}=W(),{setInitialImageMap:v,setInitialImageList:L}=N(),{data:s,isPending:S,isError:f}=V({queryKey:T.detail(e),queryFn:()=>o.getWorkspace(r,e)});return m.useEffect(()=>{n()},[]),m.useEffect(()=>{if(f){A.error("워크스페이스 정보 불러오기 실패");return}s&&s.workspaceDto&&(p(s.workspaceDto.name),Object.keys(s.workspaceDto.totalCssPropertyObj).forEach(d=>{$(d)}),a(s.workspaceDto.totalCssPropertyObj),i(Object.keys(s.workspaceDto.totalCssPropertyObj).map(d=>x(d))),c(s.workspaceDto.canvas),Q.contents=s.workspaceDto.classBlockList?JSON.parse(s.workspaceDto.classBlockList):[],l(s.workspaceDto.isCssReset),v(s.workspaceDto.imageMap),L(s.workspaceDto.imageList))},[f,s]),{data:s,isPending:S,isError:f}},Z=()=>{const{isBlockChanged:e,isCssChanged:o}=w(),r=U(({currentLocation:n,nextLocation:l})=>n.pathname!==l.pathname&&(e||o)),a="저장하지 않은 변경사항이 있습니다. 정말로 떠나시겠습니까?";m.useEffect(()=>{r.state==="blocked"&&(window.confirm(a)?r.proceed():r.reset())},[r.state,e,o]);const i=n=>{n.preventDefault()},c=()=>{window.addEventListener("beforeunload",i)},p=()=>{window.removeEventListener("beforeunload",i)};m.useEffect(()=>(e||o?c():p(),()=>{p()}),[e,o])},j=()=>{const{workspaceId:e}=K(),{isPending:o,isError:r}=Y(e);Z();const{isCoachMarkOpen:a,openCoachMark:i,closeCoachMark:c}=J();return r?t.jsx(G,{}):(m.useLayoutEffect(()=>{localStorage.getItem("isCoachMarkDismissed")?c():i()},[]),t.jsxs(t.Fragment,{children:[t.jsxs(X,{children:[t.jsx("title",{children:"BooLock - 작업 공간"}),t.jsx("meta",{name:"description",content:`작업 공간 ID: ${e}에서 HTML과 CSS를 연습해보세요.`})]}),t.jsxs("div",{className:"flex h-screen flex-col",children:[o&&t.jsx(z,{}),a&&t.jsx(b,{}),t.jsx(I,{}),t.jsx(P,{})]}),t.jsx(M,{})]}))};j.__docgenInfo={description:`@description
워크스페이스 페이지 컴포넌트`,methods:[],displayName:"WorkspacePage"};const Ze={title:"pages/WorkspacePage",component:j,parameters:{layout:"fullscreen"},decorators:[e=>t.jsx("div",{className:"h-screen w-screen",children:t.jsx(e,{})})],tags:["autodocs"]},u={args:{}};var C,g,h;u.parameters={...u.parameters,docs:{...(C=u.parameters)==null?void 0:C.docs,source:{originalSource:`{
  args: {
    // propsname: value,
  }
}`,...(h=(g=u.parameters)==null?void 0:g.docs)==null?void 0:h.source}}};const es=["Default"];export{u as Default,es as __namedExportsOrder,Ze as default};
