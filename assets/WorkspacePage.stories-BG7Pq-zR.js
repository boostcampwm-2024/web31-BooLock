import{j as t}from"./jsx-runtime-DR9Q75dM.js";import"./GuidesBox-1tD-nXdR.js";import"./HomeHeader-Du71dk__.js";import"./WorkspaceList-DzmWZvpJ.js";import"./WorkspaceHeader-B9IZE-z_.js";import"./EmptyWorkspace-EWB2Mb17.js";import"./WorkspaceGrid-vyyREuel.js";import{u as L,Q as P,a as S,I as b}from"./ImageTagModal-C3s0jnPV.js";import"./WorkspaceModal-rLbgEVV0.js";import"./PreviewBox-CcUNtyp3.js";import{W as D}from"./WorkspacePageHeader-DWisuter.js";import"./CssCategoryBar-CTKTXZoF.js";import"./CssOptionItemList-Cxd6Zt5D.js";import"./CssPropsSelectBoxHeader-CbRpNsOh.js";import{B as k,f as I,g as B,e as E,h as W,w as O,i as _}from"./HoveredEmptyWorkspace-DZD9W-0R.js";import{_ as F}from"./index-D1AAVYfs.js";import{r as w,u as M,b as N,e as H,f as x,g as Q,h as R}from"./useImageModalStore-BhpnCE_Z.js";import"./blockly_compressed-Csa91utS.js";import{r as p}from"./index-DRjF_FHU.js";import{a as q,b as A}from"./index-x70cJmE6.js";import{H as T}from"./index.esm-zFJIz-4f.js";import"./plus-qIVVYTMO.js";import"./SquareButton-hj7tViqk.js";import"./Logo-Ca0csvGK.js";import"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import{L as U}from"./Loading-CVQUyNmW.js";import"./Spinner-CHPW_G4Q.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import{N as K}from"./NotFound-uj_I7ceJ.js";import"./GuideVideo-MGmf4GR2.js";import"./WorkspaceLoadError-FmbY_INt.js";import"./NotHoveredEmptyWorkspace-CddEnm-X.js";import"./CssCategoryButton-BxNJ2PEt.js";import"./client-Dbo3a7kb.js";import"./ModalConfirm-BDuYJlbG.js";import"./QueryClientProvider-BdRu95_o.js";import"./infiniteQueryBehavior-DdhmIwcw.js";import"./cssCategoryList-CHFX1k4S.js";import"./question-BUxmZXrP.js";function z(e,o){return L(e,P)}const G=e=>{k[e]||(k[e]={init:function(){this.appendDummyInput().appendField(new I(w(e)),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss")}})},J=e=>{const o=_(),r=B()||E(),{initCssPropertyObj:m}=M(),{initClassBlockList:i}=N(),{setCanvasInfo:l}=H(),{resetChangedStatusState:n}=x(),{setIsResetCssChecked:a}=Q(),{setInitialImageMap:u,setInitialImageList:v}=R(),{data:s,isPending:y,isError:d}=z({queryKey:O.detail(e),queryFn:()=>o.getWorkspace(r,e)});return p.useEffect(()=>{n()},[]),p.useEffect(()=>{if(d){F.error("워크스페이스 정보 불러오기 실패");return}s&&s.workspaceDto&&(m(s.workspaceDto.totalCssPropertyObj),i(Object.keys(s.workspaceDto.totalCssPropertyObj).map(f=>w(f))),l(s.workspaceDto.canvas),W.contents=s.workspaceDto.classBlockList?JSON.parse(s.workspaceDto.classBlockList):[],a(s.workspaceDto.isCssReset),Object.keys(s.workspaceDto.totalCssPropertyObj).forEach(f=>{G(f)}),u(s.workspaceDto.imageMap),v(s.workspaceDto.imageList))},[d,s]),{data:s,isPending:y,isError:d}},$=()=>{const{isBlockChanged:e,isCssChanged:o}=x();let r=q(({currentLocation:a,nextLocation:u})=>a.pathname!==u.pathname&&(e||o));const m="저장하지 않은 변경사항이 있습니다. 정말로 떠나시겠습니까?";p.useEffect(()=>{r.state==="blocked"&&(window.confirm(m)?r.proceed():r.reset())},[r.state,e,o]);const i=a=>{a.preventDefault()},l=()=>{window.addEventListener("beforeunload",i)},n=()=>{window.removeEventListener("beforeunload",i)};p.useEffect(()=>(e||o?l():n(),()=>{n()}),[e,o])},j=()=>{const{workspaceId:e}=A(),{isPending:o,isError:r}=J(e);return $(),r?t.jsx(K,{}):t.jsxs(t.Fragment,{children:[t.jsxs(T,{children:[t.jsx("title",{children:"BooLock - 작업 공간"}),t.jsx("meta",{name:"description",content:`작업 공간 ID: ${e}에서 HTML과 CSS를 연습해보세요.`})]}),t.jsxs("div",{className:"flex h-screen flex-col",children:[o&&t.jsx(U,{}),t.jsx(D,{}),t.jsx(S,{})]}),t.jsx(b,{})]})};j.__docgenInfo={description:`@description
워크스페이스 페이지 컴포넌트`,methods:[],displayName:"WorkspacePage"};const Ne={title:"pages/WorkspacePage",component:j,parameters:{layout:"fullscreen"},decorators:[e=>t.jsx("div",{className:"h-screen w-screen",children:t.jsx(e,{})})],tags:["autodocs"]},c={args:{}};var g,C,h;c.parameters={...c.parameters,docs:{...(g=c.parameters)==null?void 0:g.docs,source:{originalSource:`{
  args: {
    // propsname: value,
  }
}`,...(h=(C=c.parameters)==null?void 0:C.docs)==null?void 0:h.source}}};const He=["Default"];export{c as Default,He as __namedExportsOrder,Ne as default};
