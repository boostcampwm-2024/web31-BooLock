import{j as o}from"./jsx-runtime-DR9Q75dM.js";import"./Banner-Cmxe5cZT.js";import"./HomeHeader-DVl1K0aQ.js";import"./WorkspaceList-CZ7kcOjP.js";import"./WorkspaceHeader-x5-aMsfN.js";import"./EmptyWorkspace-hy6K3l9T.js";import"./WorkspaceGrid-C2jJPMUx.js";import{u as D,Q as b,a as j}from"./CssPropsSelectBox-hK87whJH.js";import"./WorkspaceModal-DeW0NGHS.js";import"./PreviewBox-gSDsTLqR.js";import{C as P}from"./CoachMark-BiCYGCKD.js";import"./WorkspaceHeaderButtons-Bb0eMaDW.js";import{W as M}from"./WorkspacePageHeader-CBE0tvIP.js";import"./CssCategoryBar-FeeQkbr7.js";import"./CssOptionItemList-45M7Y2Hz.js";import"./CssPropsSelectBoxHeader-DXXWObL-.js";import{I}from"./ImageTagModal-A8Kp2VaX.js";import{r as x,u as E,c as O,f as B,i as v,g as W,a as N}from"./html2canvas.esm-D1fnD2iC.js";import{B as k,i as R,j as _,f as F,h as q,k as Q,w as T,l as A}from"./HoveredEmptyWorkspace-DWkGw7A1.js";import{_ as H}from"./index-D1AAVYfs.js";import{r as p}from"./index-DRjF_FHU.js";import{a as U,b as K}from"./index-x70cJmE6.js";import"./plus-C7enkl2d.js";import"./SquareButton-eIFPi1Hz.js";import"./Logo-DlHd6_yt.js";import"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import{L as X}from"./Loading-CVQUyNmW.js";import"./Spinner-CHbqakIa.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import{N as z}from"./NotFound-BJz7seW2.js";import{u as G}from"./useCoachMarkStore-Bn0-Ay5q.js";import"./WorkspaceLoadError-BuktD2D2.js";import"./NotHoveredEmptyWorkspace-loFxOJJf.js";import"./CssCategoryButton-D2idemFI.js";import"./client-Dbo3a7kb.js";import"./ImageTagModalHeader-DRiIRUzt.js";import"./ImageTagModalImg-BJAMLe19.js";import"./ImageTagModalButton-DJiJ58eG.js";import"./ImageTagModalListItem-D30WR0c8.js";import"./QueryClientProvider-BdRu95_o.js";import"./infiniteQueryBehavior-DdhmIwcw.js";import"./ModalConfirm-BDuYJlbG.js";import"./CodeViewer-D_DSBhbX.js";import"./CodeContent-DoxBelqC.js";import"./CodeViewer.module-CZ8GGqUa.js";import"./LineNumbers-eZdDlBqZ.js";import"./question-BUxmZXrP.js";import"./cssCategoryList-CHFX1k4S.js";import"./react-72mb-naO.js";import"./ErrorContent-DWCu90p-.js";function J(e,t){return D(e,b)}const V=e=>{k[e]||(k[e]={init:function(){this.appendDummyInput().appendField(new R(x(e)),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss"),this.showContextMenu=t=>{if(this.getSvgRoot().transform.baseVal[0].matrix.e!==8)return;const i=this.generateContextMenu();_.show(t,i,this.RTL)}}})},Y=e=>{const t=A(),r=F()||q(),{initCssPropertyObj:i}=E(),{initClassBlockList:c}=O(),{setCanvasInfo:m,setName:a}=B(),{resetChangedStatusState:n}=v(),{setIsResetCssChecked:l}=W(),{setInitialImageMap:y,setInitialImageList:L}=N(),{data:s,isPending:S,isError:f}=J({queryKey:T.detail(e),queryFn:()=>t.getWorkspace(r,e)});return p.useEffect(()=>{n()},[]),p.useEffect(()=>{if(f){H.error("워크스페이스 정보 불러오기 실패");return}s&&s.workspaceDto&&(a(s.workspaceDto.name),Object.keys(s.workspaceDto.totalCssPropertyObj).forEach(d=>{V(d)}),i(s.workspaceDto.totalCssPropertyObj),c(Object.keys(s.workspaceDto.totalCssPropertyObj).map(d=>x(d))),m(s.workspaceDto.canvas),Q.contents=s.workspaceDto.classBlockList?JSON.parse(s.workspaceDto.classBlockList):[],l(s.workspaceDto.isCssReset),y(s.workspaceDto.imageMap),L(s.workspaceDto.imageList))},[f,s]),{data:s,isPending:S,isError:f}},Z=()=>{const{isBlockChanged:e,isCssChanged:t}=v(),r=U(({currentLocation:n,nextLocation:l})=>n.pathname!==l.pathname&&(e||t)),i="저장하지 않은 변경사항이 있습니다. 정말로 떠나시겠습니까?";p.useEffect(()=>{r.state==="blocked"&&(window.confirm(i)?r.proceed():r.reset())},[r.state,e,t]);const c=n=>{n.preventDefault()},m=()=>{window.addEventListener("beforeunload",c)},a=()=>{window.removeEventListener("beforeunload",c)};p.useEffect(()=>(e||t?m():a(),()=>{a()}),[e,t])},w=()=>{const{workspaceId:e}=K(),{isPending:t,isError:r}=Y(e);Z();const{currentStep:i,isCoachMarkOpen:c,openCoachMark:m}=G(),a=document.querySelector(".blocklyToolboxDiv");return p.useLayoutEffect(()=>{localStorage.getItem("isCoachMarkDismissed")||m()},[]),p.useEffect(()=>{a&&(i<=1?a.classList.add("coachMarkHighlight"):a.classList.remove("coachMarkHighlight"))},[i,a]),r?o.jsx(z,{}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex h-screen flex-col",children:[t&&o.jsx(X,{}),c&&o.jsx(P,{}),o.jsx(M,{}),o.jsx(j,{})]}),o.jsx(I,{})]})};w.__docgenInfo={description:`@description
워크스페이스 페이지 컴포넌트`,methods:[],displayName:"WorkspacePage"};const Ye={title:"pages/WorkspacePage",component:w,parameters:{layout:"fullscreen"},decorators:[e=>o.jsx("div",{className:"h-screen w-screen",children:o.jsx(e,{})})],tags:["autodocs"]},u={args:{}};var g,h,C;u.parameters={...u.parameters,docs:{...(g=u.parameters)==null?void 0:g.docs,source:{originalSource:`{
  args: {
    // propsname: value,
  }
}`,...(C=(h=u.parameters)==null?void 0:h.docs)==null?void 0:C.source}}};const Ze=["Default"];export{u as Default,Ze as __namedExportsOrder,Ye as default};
