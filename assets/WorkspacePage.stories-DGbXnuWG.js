import{j as t}from"./jsx-runtime-DR9Q75dM.js";import"./GuidesBox-DJjtGaGo.js";import"./HomeHeader-C7PfUXOC.js";import"./WorkspaceList-CnAJNB-Q.js";import"./WorkspaceHeader-Bb6ffAsd.js";import"./EmptyWorkspace-ZWs3VSSk.js";import"./WorkspaceGrid-vyyREuel.js";import{u as w,Q as y,a as P}from"./CssPropsSelectBox-CJJSYXWs.js";import"./WorkspaceModal-VjflWkFQ.js";import"./PreviewBox-BLkHykSa.js";import{W as L}from"./WorkspacePageHeader-DZvR48G1.js";import"./CssCategoryBar-CZJrv2a_.js";import"./CssOptionItemList-pm1NZCn5.js";import"./CssPropsSelectBoxHeader-CNKjK95V.js";import{B as d,e as S,g as b,d as B,f as D,w as E,h as W}from"./HoveredEmptyWorkspace-nUKgHagC.js";import{_ as O}from"./index-D1AAVYfs.js";import{r as h,u as I,b as _,e as F,f as v,g as N}from"./useWorkspaceStore-DrKMScWF.js";import"./blockly_compressed-Csa91utS.js";import{r as c}from"./index-DRjF_FHU.js";import{a as H,b as Q}from"./index-x70cJmE6.js";import{H as R}from"./index.esm-zFJIz-4f.js";import"./CircleButton-CZ-LhlOb.js";import"./SquareButton-hj7tViqk.js";import"./Logo-Ca0csvGK.js";import"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import{L as q}from"./Loading-CVQUyNmW.js";import"./Spinner-CHPW_G4Q.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import"./Select-BMkjBj55.js";import{N as A}from"./NotFound-BB8Ueqah.js";import"./GuideVideo-MGmf4GR2.js";import"./WorkspaceLoadError-FmbY_INt.js";import"./NotHoveredEmptyWorkspace-CddEnm-X.js";import"./RedoButton-BFdZQsCv.js";import"./UndoButton-C4OAD06t.js";import"./CssCategoryButton-cnkcY8L4.js";import"./client-Dbo3a7kb.js";import"./QueryClientProvider-BdRu95_o.js";import"./infiniteQueryBehavior-DdhmIwcw.js";import"./ModalConfirm-D4PzhGiJ.js";import"./cssCategoryList-CHFX1k4S.js";import"./plus-DWHtmhlY.js";import"./question-CX5dqjCQ.js";function U(e,r){return w(e,y)}const K=e=>{d[e]||(d[e]={init:function(){this.appendDummyInput().appendField(new S(h(e)),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss")}})},T=e=>{const r=W(),o=b()||B(),{initCssPropertyObj:m}=I(),{initClassBlockList:i}=_(),{setCanvasInfo:l}=F(),{resetChangedStatusState:n}=v(),{setIsResetCssChecked:a}=N(),{data:s,isPending:j,isError:u}=U({queryKey:E.detail(e),queryFn:()=>r.getWorkspace(o,e)});return c.useEffect(()=>{n()},[]),c.useEffect(()=>{if(u){O.error("워크스페이스 정보 불러오기 실패");return}s&&s.workspaceDto&&(m(s.workspaceDto.totalCssPropertyObj),i(Object.keys(s.workspaceDto.totalCssPropertyObj).map(f=>h(f))),l(s.workspaceDto.canvas),D.contents=s.workspaceDto.classBlockList?JSON.parse(s.workspaceDto.classBlockList):[],a(s.workspaceDto.isCssReset),Object.keys(s.workspaceDto.totalCssPropertyObj).forEach(f=>{K(f)}))},[u,s]),{data:s,isPending:j,isError:u}},z=()=>{const{isBlockChanged:e,isCssChanged:r}=v();let o=H(({currentLocation:a,nextLocation:s})=>a.pathname!==s.pathname&&(e||r));const m="저장하지 않은 변경사항이 있습니다. 정말로 떠나시겠습니까?";c.useEffect(()=>{o.state==="blocked"&&(window.confirm(m)?o.proceed():o.reset())},[o.state,e,r]);const i=a=>{a.preventDefault()},l=()=>{window.addEventListener("beforeunload",i)},n=()=>{window.removeEventListener("beforeunload",i)};c.useEffect(()=>(e||r?l():n(),()=>{n()}),[e,r])},x=()=>{const{workspaceId:e}=Q(),{isPending:r,isError:o}=T(e);return z(),o?t.jsx(A,{}):t.jsxs(t.Fragment,{children:[t.jsxs(R,{children:[t.jsx("title",{children:"BooLock - 작업 공간"}),t.jsx("meta",{name:"description",content:`작업 공간 ID: ${e}에서 HTML과 CSS를 연습해보세요.`})]}),t.jsxs("div",{className:"flex h-screen flex-col",children:[r&&t.jsx(q,{}),t.jsx(L,{}),t.jsx(P,{})]})]})};x.__docgenInfo={description:`@description
워크스페이스 페이지 컴포넌트`,methods:[],displayName:"WorkspacePage"};const He={title:"pages/WorkspacePage",component:x,parameters:{layout:"fullscreen"},decorators:[e=>t.jsx("div",{className:"h-screen w-screen",children:t.jsx(e,{})})],tags:["autodocs"]},p={args:{}};var k,C,g;p.parameters={...p.parameters,docs:{...(k=p.parameters)==null?void 0:k.docs,source:{originalSource:`{
  args: {
    // propsname: value,
  }
}`,...(g=(C=p.parameters)==null?void 0:C.docs)==null?void 0:g.source}}};const Qe=["Default"];export{p as Default,Qe as __namedExportsOrder,He as default};
