var io=Object.defineProperty;var Rt=t=>{throw TypeError(t)};var lo=(t,s,n)=>s in t?io(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var q=(t,s,n)=>lo(t,typeof s!="symbol"?s+"":s,n),Je=(t,s,n)=>s.has(t)||Rt("Cannot "+n);var k=(t,s,n)=>(Je(t,s,"read from private field"),n?n.call(t):s.get(t)),pe=(t,s,n)=>s.has(t)?Rt("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,n),_e=(t,s,n,e)=>(Je(t,s,"write to private field"),e?e.call(t,n):s.set(t,n),n),me=(t,s,n)=>(Je(t,s,"access private method"),n);import{j as b}from"./jsx-runtime-DR9Q75dM.js";import{r as I,c as ao,g as Jr}from"./index-DRjF_FHU.js";import{B as co,g as xe,j as uo,d as $t,h as S,i as Me,k as $o,a as jt,e as Re,u as he,f as Ie,b as At,l as qt}from"./useWorkspaceStore-BD1duu30.js";import{S as po,w as _o,q as yt,A as mo,b as Jt,z as Ae}from"./QueryClientProvider-BdRu95_o.js";import{_ as H}from"./index-D1AAVYfs.js";import"./GuideVideo-MGmf4GR2.js";import{C as pt,S as To}from"./plus-qIVVYTMO.js";import"./SquareButton-hj7tViqk.js";import"./Logo-Ca0csvGK.js";import{r as ho}from"./index-BXCeiWJk.js";import"./ToasterWithMax-D4jPvwZi.js";import"./Loading-CVQUyNmW.js";import{S as _t}from"./Spinner-CUCGrwDX.js";import"./SkeletonWorkspace-D4UalYBK.js";import"./SkeletonWorkspaceList-LqBByOXs.js";import"./WorkspaceLoadError-FmbY_INt.js";import"./NotHoveredEmptyWorkspace-CddEnm-X.js";import{u as Eo,b as zt}from"./index-x70cJmE6.js";import{S as go,C as Qt}from"./question-CX5dqjCQ.js";import"./CssCategoryButton-BHr79OL3.js";import{c as fo}from"./client-Dbo3a7kb.js";const bo=t=>I.createElement("svg",{width:94,height:89,viewBox:"0 0 94 89",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},I.createElement("path",{d:"M15.666 44.4731H78.3327",stroke:"#00D78B",strokeWidth:8,strokeLinecap:"round",strokeLinejoin:"round"}),I.createElement("path",{d:"M47 14.8311L47 74.1147",stroke:"#00D78B",strokeWidth:8,strokeLinecap:"round",strokeLinejoin:"round"})),v=[];for(let t=0;t<256;++t)v.push((t+256).toString(16).slice(1));function So(t,s=0){return(v[t[s+0]]+v[t[s+1]]+v[t[s+2]]+v[t[s+3]]+"-"+v[t[s+4]]+v[t[s+5]]+"-"+v[t[s+6]]+v[t[s+7]]+"-"+v[t[s+8]]+v[t[s+9]]+"-"+v[t[s+10]]+v[t[s+11]]+v[t[s+12]]+v[t[s+13]]+v[t[s+14]]+v[t[s+15]]).toLowerCase()}let ze;const Io=new Uint8Array(16);function Oo(){if(!ze){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ze=crypto.getRandomValues.bind(crypto)}return ze(Io)}const Ro=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Lt={randomUUID:Ro};function Ao(t,s,n){if(Lt.randomUUID&&!s&&!t)return Lt.randomUUID();t=t||{};const e=t.random||(t.rng||Oo)();return e[6]=e[6]&15|64,e[8]=e[8]&63|128,So(e)}const ve=()=>localStorage.getItem("userId"),Fe=()=>{const t=Ao();return localStorage.setItem("userId",t),t},yo=t=>{const s=new Date(t),n=new Date,e=new Intl.RelativeTimeFormat("ko",{numeric:"auto"}),r=Math.floor((s.getTime()-n.getTime())/(1e3*60)),l=Math.floor(r/60);return r>-60?e.format(r,"minute"):l>-24?e.format(l,"hour"):new Intl.DateTimeFormat("ko",{year:"numeric",month:"2-digit",day:"2-digit"}).format(s)},Zt=(t,s)=>{let n;return(...e)=>{let r;return n&&clearTimeout(n),n=setTimeout(()=>{r=t(...e)},s),r}},{ASTNode:Ti,BasicCursor:hi,Block:Ei,BlockSvg:gi,Blocks:Ct,COLLAPSED_FIELD_NAME:fi,COLLAPSED_INPUT_NAME:bi,COLLAPSE_CHARS:Si,CodeGenerator:Ii,CollapsibleToolboxCategory:Oi,ComponentManager:Ri,Connection:Ai,ConnectionChecker:yi,ConnectionDB:Li,ConnectionType:Ci,ContextMenu:Ni,ContextMenuItems:Mi,ContextMenuRegistry:Qe,Css:ki,Cursor:Bi,DELETE_VARIABLE_ID:Pi,DeleteArea:xi,DragTarget:Di,DropDownDiv:wi,Events:vi,Extensions:Fi,Field:Ui,FieldCheckbox:Hi,FieldDropdown:Vi,FieldImage:Gi,FieldLabel:Yi,FieldLabelSerializable:Lo,FieldNumber:Ki,FieldTextInput:Co,FieldVariable:Xi,Flyout:Wi,FlyoutButton:ji,FlyoutMetricsManager:qi,Generator:No,Gesture:Ji,Grid:zi,HorizontalFlyout:Qi,INPUT_VALUE:Zi,Input:el,InsertionMarkerManager:tl,InsertionMarkerPreviewer:sl,Marker:ol,MarkerManager:nl,Menu:rl,MenuItem:il,MetricsManager:ll,Msg:al,NEXT_STATEMENT:cl,Names:ul,OPPOSITE_TYPE:dl,OUTPUT_VALUE:$l,Options:pl,PREVIOUS_STATEMENT:_l,PROCEDURE_CATEGORY_NAME:ml,Procedures:Tl,RENAME_VARIABLE_ID:hl,RenderedConnection:El,Scrollbar:gl,ScrollbarPair:fl,ShortcutItems:bl,ShortcutRegistry:Sl,TOOLBOX_AT_BOTTOM:Il,TOOLBOX_AT_LEFT:Ol,TOOLBOX_AT_RIGHT:Rl,TOOLBOX_AT_TOP:Al,TabNavigateCursor:yl,Theme:Mo,ThemeManager:Ll,Themes:es,Toolbox:Cl,ToolboxCategory:Nl,ToolboxItem:Ml,ToolboxSeparator:kl,Tooltip:Bl,Touch:Pl,Trashcan:xl,UnattachedFieldError:Dl,VARIABLE_CATEGORY_NAME:wl,VARIABLE_DYNAMIC_CATEGORY_NAME:vl,VERSION:Fl,VariableMap:Ul,VariableModel:Hl,Variables:Vl,VariablesDynamic:Gl,VerticalFlyout:ko,WidgetDiv:Yl,Workspace:Kl,WorkspaceAudio:Xl,WorkspaceDragger:Wl,WorkspaceSvg:jl,Xml:ql,ZoomControls:Jl,blockAnimations:zl,blockRendering:Ql,browserEvents:Zl,bubbles:ea,bumpObjects:ta,clipboard:sa,comments:oa,common:na,config:ra,constants:ia,defineBlocksWithJsonArray:la,dialog:aa,dragging:ca,fieldRegistry:ua,geras:da,getMainWorkspace:Nt,getSelected:$a,hasBubble:pa,hideChaff:_a,icons:ma,inject:Ta,inputs:ha,isCopyable:Ea,isDeletable:ga,isDraggable:fa,isIcon:ba,isObservable:Sa,isPaster:Ia,isRenderedElement:Oa,isSelectable:Ra,isSerializable:Aa,isVariableBackedParameterModel:ya,procedures:La,registry:Ca,renderManagement:Na,serialization:Bo,setLocale:Ma,setParentContainer:ka,svgResize:Ba,thrasos:Pa,uiPosition:xa,utils:Se,zelos:Da}=co,Mt={SELECT_PREVIEW_TAB:"미리보기 탭을 선택해주세요.",FAIL_TO_SAVE:"저장에 실패했습니다."},Po=async()=>{var m;const t=xe.getState().isResetCssChecked,s=document.querySelector("iframe");if(!s)throw new Error(Mt.SELECT_PREVIEW_TAB);const n=(s==null?void 0:s.contentDocument)||((m=s==null?void 0:s.contentWindow)==null?void 0:m.document);if(!n)throw new Error(Mt.FAIL_TO_SAVE);const e=n.documentElement.outerHTML.replace("<body",'<div style="width: 100%; height: 100%;"').replace("</body>","</div>"),r=document.createElement("div");t?(r.classList.add("reset-css"),r.innerHTML=e.replace("<style>","<style>.reset-css {").replace("</style>","} </style>")):r.innerHTML=e||"",r.style.position="absolute",r.style.top="-9999px",r.style.zIndex="-1",r.style.width="800px",r.style.height="800px",document.body.appendChild(r);const l=await uo(r,{useCORS:!0,logging:!0,scale:2,width:800});document.body.removeChild(r);const a=await new Promise(_=>l.toBlob(_,"image/webp"));return new File([a],"thumbnail.webp",{type:"image/webp"})};var ie,le,U,te,se,ke,nt,Wt,xo=(Wt=class extends po{constructor(s,n){super();pe(this,se);pe(this,ie);pe(this,le);pe(this,U);pe(this,te);_e(this,ie,s),this.setOptions(n),this.bindMethods(),me(this,se,ke).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var e;const n=this.options;this.options=k(this,ie).defaultMutationOptions(s),_o(this.options,n)||k(this,ie).getMutationCache().notify({type:"observerOptionsUpdated",mutation:k(this,U),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&yt(n.mutationKey)!==yt(this.options.mutationKey)?this.reset():((e=k(this,U))==null?void 0:e.state.status)==="pending"&&k(this,U).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=k(this,U))==null||s.removeObserver(this)}onMutationUpdate(s){me(this,se,ke).call(this),me(this,se,nt).call(this,s)}getCurrentResult(){return k(this,le)}reset(){var s;(s=k(this,U))==null||s.removeObserver(this),_e(this,U,void 0),me(this,se,ke).call(this),me(this,se,nt).call(this)}mutate(s,n){var e;return _e(this,te,n),(e=k(this,U))==null||e.removeObserver(this),_e(this,U,k(this,ie).getMutationCache().build(k(this,ie),this.options)),k(this,U).addObserver(this),k(this,U).execute(s)}},ie=new WeakMap,le=new WeakMap,U=new WeakMap,te=new WeakMap,se=new WeakSet,ke=function(){var n;const s=((n=k(this,U))==null?void 0:n.state)??mo();_e(this,le,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},nt=function(s){Jt.batch(()=>{var n,e,r,l,a,u,m,_;if(k(this,te)&&this.hasListeners()){const p=k(this,le).variables,T=k(this,le).context;(s==null?void 0:s.type)==="success"?((e=(n=k(this,te)).onSuccess)==null||e.call(n,s.data,p,T),(l=(r=k(this,te)).onSettled)==null||l.call(r,s.data,null,p,T)):(s==null?void 0:s.type)==="error"&&((u=(a=k(this,te)).onError)==null||u.call(a,s.error,p,T),(_=(m=k(this,te)).onSettled)==null||_.call(m,void 0,s.error,p,T))}this.listeners.forEach(p=>{p(k(this,le))})})},Wt);function Do(t,s){return typeof t=="function"?t(...s):!!t}function wo(){}function Ue(t,s){const n=Ae(),[e]=I.useState(()=>new xo(n,t));I.useEffect(()=>{e.setOptions(t)},[e,t]);const r=I.useSyncExternalStore(I.useCallback(a=>e.subscribe(Jt.batchCalls(a)),[e]),()=>e.getCurrentResult(),()=>e.getCurrentResult()),l=I.useCallback((a,u)=>{e.mutate(a,u).catch(wo)},[e]);if(r.error&&Do(e.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:l,mutateAsync:r.mutate}}function ts(t,s){return function(){return t.apply(s,arguments)}}const{toString:vo}=Object.prototype,{getPrototypeOf:mt}=Object,He=(t=>s=>{const n=vo.call(s);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),J=t=>(t=t.toLowerCase(),s=>He(s)===t),Ve=t=>s=>typeof s===t,{isArray:ge}=Array,Oe=Ve("undefined");function Fo(t){return t!==null&&!Oe(t)&&t.constructor!==null&&!Oe(t.constructor)&&K(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ss=J("ArrayBuffer");function Uo(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&ss(t.buffer),s}const Ho=Ve("string"),K=Ve("function"),os=Ve("number"),Ge=t=>t!==null&&typeof t=="object",Vo=t=>t===!0||t===!1,Be=t=>{if(He(t)!=="object")return!1;const s=mt(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Go=J("Date"),Yo=J("File"),Ko=J("Blob"),Xo=J("FileList"),Wo=t=>Ge(t)&&K(t.pipe),jo=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||K(t.append)&&((s=He(t))==="formdata"||s==="object"&&K(t.toString)&&t.toString()==="[object FormData]"))},qo=J("URLSearchParams"),[Jo,zo,Qo,Zo]=["ReadableStream","Request","Response","Headers"].map(J),en=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ye(t,s,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let e,r;if(typeof t!="object"&&(t=[t]),ge(t))for(e=0,r=t.length;e<r;e++)s.call(null,t[e],e,t);else{const l=n?Object.getOwnPropertyNames(t):Object.keys(t),a=l.length;let u;for(e=0;e<a;e++)u=l[e],s.call(null,t[u],u,t)}}function ns(t,s){s=s.toLowerCase();const n=Object.keys(t);let e=n.length,r;for(;e-- >0;)if(r=n[e],s===r.toLowerCase())return r;return null}const ue=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,rs=t=>!Oe(t)&&t!==ue;function rt(){const{caseless:t}=rs(this)&&this||{},s={},n=(e,r)=>{const l=t&&ns(s,r)||r;Be(s[l])&&Be(e)?s[l]=rt(s[l],e):Be(e)?s[l]=rt({},e):ge(e)?s[l]=e.slice():s[l]=e};for(let e=0,r=arguments.length;e<r;e++)arguments[e]&&ye(arguments[e],n);return s}const tn=(t,s,n,{allOwnKeys:e}={})=>(ye(s,(r,l)=>{n&&K(r)?t[l]=ts(r,n):t[l]=r},{allOwnKeys:e}),t),sn=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),on=(t,s,n,e)=>{t.prototype=Object.create(s.prototype,e),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),n&&Object.assign(t.prototype,n)},nn=(t,s,n,e)=>{let r,l,a;const u={};if(s=s||{},t==null)return s;do{for(r=Object.getOwnPropertyNames(t),l=r.length;l-- >0;)a=r[l],(!e||e(a,t,s))&&!u[a]&&(s[a]=t[a],u[a]=!0);t=n!==!1&&mt(t)}while(t&&(!n||n(t,s))&&t!==Object.prototype);return s},rn=(t,s,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=s.length;const e=t.indexOf(s,n);return e!==-1&&e===n},ln=t=>{if(!t)return null;if(ge(t))return t;let s=t.length;if(!os(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=t[s];return n},an=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&mt(Uint8Array)),cn=(t,s)=>{const e=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=e.next())&&!r.done;){const l=r.value;s.call(t,l[0],l[1])}},un=(t,s)=>{let n;const e=[];for(;(n=t.exec(s))!==null;)e.push(n);return e},dn=J("HTMLFormElement"),$n=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,e,r){return e.toUpperCase()+r}),kt=(({hasOwnProperty:t})=>(s,n)=>t.call(s,n))(Object.prototype),pn=J("RegExp"),is=(t,s)=>{const n=Object.getOwnPropertyDescriptors(t),e={};ye(n,(r,l)=>{let a;(a=s(r,l,t))!==!1&&(e[l]=a||r)}),Object.defineProperties(t,e)},_n=t=>{is(t,(s,n)=>{if(K(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const e=t[n];if(K(e)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},mn=(t,s)=>{const n={},e=r=>{r.forEach(l=>{n[l]=!0})};return ge(t)?e(t):e(String(t).split(s)),n},Tn=()=>{},hn=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s,Ze="abcdefghijklmnopqrstuvwxyz",Bt="0123456789",ls={DIGIT:Bt,ALPHA:Ze,ALPHA_DIGIT:Ze+Ze.toUpperCase()+Bt},En=(t=16,s=ls.ALPHA_DIGIT)=>{let n="";const{length:e}=s;for(;t--;)n+=s[Math.random()*e|0];return n};function gn(t){return!!(t&&K(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const fn=t=>{const s=new Array(10),n=(e,r)=>{if(Ge(e)){if(s.indexOf(e)>=0)return;if(!("toJSON"in e)){s[r]=e;const l=ge(e)?[]:{};return ye(e,(a,u)=>{const m=n(a,r+1);!Oe(m)&&(l[u]=m)}),s[r]=void 0,l}}return e};return n(t,0)},bn=J("AsyncFunction"),Sn=t=>t&&(Ge(t)||K(t))&&K(t.then)&&K(t.catch),as=((t,s)=>t?setImmediate:s?((n,e)=>(ue.addEventListener("message",({source:r,data:l})=>{r===ue&&l===n&&e.length&&e.shift()()},!1),r=>{e.push(r),ue.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",K(ue.postMessage)),In=typeof queueMicrotask<"u"?queueMicrotask.bind(ue):typeof process<"u"&&process.nextTick||as,$={isArray:ge,isArrayBuffer:ss,isBuffer:Fo,isFormData:jo,isArrayBufferView:Uo,isString:Ho,isNumber:os,isBoolean:Vo,isObject:Ge,isPlainObject:Be,isReadableStream:Jo,isRequest:zo,isResponse:Qo,isHeaders:Zo,isUndefined:Oe,isDate:Go,isFile:Yo,isBlob:Ko,isRegExp:pn,isFunction:K,isStream:Wo,isURLSearchParams:qo,isTypedArray:an,isFileList:Xo,forEach:ye,merge:rt,extend:tn,trim:en,stripBOM:sn,inherits:on,toFlatObject:nn,kindOf:He,kindOfTest:J,endsWith:rn,toArray:ln,forEachEntry:cn,matchAll:un,isHTMLForm:dn,hasOwnProperty:kt,hasOwnProp:kt,reduceDescriptors:is,freezeMethods:_n,toObjectSet:mn,toCamelCase:$n,noop:Tn,toFiniteNumber:hn,findKey:ns,global:ue,isContextDefined:rs,ALPHABET:ls,generateString:En,isSpecCompliantForm:gn,toJSONObject:fn,isAsyncFn:bn,isThenable:Sn,setImmediate:as,asap:In};function O(t,s,n,e,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),e&&(this.request=e),r&&(this.response=r,this.status=r.status?r.status:null)}$.inherits(O,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const cs=O.prototype,us={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{us[t]={value:t}});Object.defineProperties(O,us);Object.defineProperty(cs,"isAxiosError",{value:!0});O.from=(t,s,n,e,r,l)=>{const a=Object.create(cs);return $.toFlatObject(t,a,function(m){return m!==Error.prototype},u=>u!=="isAxiosError"),O.call(a,t.message,s,n,e,r),a.cause=t,a.name=t.name,l&&Object.assign(a,l),a};const On=null;function it(t){return $.isPlainObject(t)||$.isArray(t)}function ds(t){return $.endsWith(t,"[]")?t.slice(0,-2):t}function Pt(t,s,n){return t?t.concat(s).map(function(r,l){return r=ds(r),!n&&l?"["+r+"]":r}).join(n?".":""):s}function Rn(t){return $.isArray(t)&&!t.some(it)}const An=$.toFlatObject($,{},null,function(s){return/^is[A-Z]/.test(s)});function Ye(t,s,n){if(!$.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,n=$.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,g){return!$.isUndefined(g[f])});const e=n.metaTokens,r=n.visitor||p,l=n.dots,a=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(s);if(!$.isFunction(r))throw new TypeError("visitor must be a function");function _(E){if(E===null)return"";if($.isDate(E))return E.toISOString();if(!m&&$.isBlob(E))throw new O("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(E)||$.isTypedArray(E)?m&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function p(E,f,g){let L=E;if(E&&!g&&typeof E=="object"){if($.endsWith(f,"{}"))f=e?f:f.slice(0,-2),E=JSON.stringify(E);else if($.isArray(E)&&Rn(E)||($.isFileList(E)||$.endsWith(f,"[]"))&&(L=$.toArray(E)))return f=ds(f),L.forEach(function(M,F){!($.isUndefined(M)||M===null)&&s.append(a===!0?Pt([f],F,l):a===null?f:f+"[]",_(M))}),!1}return it(E)?!0:(s.append(Pt(g,f,l),_(E)),!1)}const T=[],y=Object.assign(An,{defaultVisitor:p,convertValue:_,isVisitable:it});function R(E,f){if(!$.isUndefined(E)){if(T.indexOf(E)!==-1)throw Error("Circular reference detected in "+f.join("."));T.push(E),$.forEach(E,function(L,A){(!($.isUndefined(L)||L===null)&&r.call(s,L,$.isString(A)?A.trim():A,f,y))===!0&&R(L,f?f.concat(A):[A])}),T.pop()}}if(!$.isObject(t))throw new TypeError("data must be an object");return R(t),s}function xt(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(e){return s[e]})}function Tt(t,s){this._pairs=[],t&&Ye(t,this,s)}const $s=Tt.prototype;$s.append=function(s,n){this._pairs.push([s,n])};$s.toString=function(s){const n=s?function(e){return s.call(this,e,xt)}:xt;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function yn(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ps(t,s,n){if(!s)return t;const e=n&&n.encode||yn,r=n&&n.serialize;let l;if(r?l=r(s,n):l=$.isURLSearchParams(s)?s.toString():new Tt(s,n).toString(e),l){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Dt{constructor(){this.handlers=[]}use(s,n,e){return this.handlers.push({fulfilled:s,rejected:n,synchronous:e?e.synchronous:!1,runWhen:e?e.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){$.forEach(this.handlers,function(e){e!==null&&s(e)})}}const _s={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ln=typeof URLSearchParams<"u"?URLSearchParams:Tt,Cn=typeof FormData<"u"?FormData:null,Nn=typeof Blob<"u"?Blob:null,Mn={isBrowser:!0,classes:{URLSearchParams:Ln,FormData:Cn,Blob:Nn},protocols:["http","https","file","blob","url","data"]},ht=typeof window<"u"&&typeof document<"u",lt=typeof navigator=="object"&&navigator||void 0,kn=ht&&(!lt||["ReactNative","NativeScript","NS"].indexOf(lt.product)<0),Bn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Pn=ht&&window.location.href||"http://localhost",xn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ht,hasStandardBrowserEnv:kn,hasStandardBrowserWebWorkerEnv:Bn,navigator:lt,origin:Pn},Symbol.toStringTag,{value:"Module"})),V={...xn,...Mn};function Dn(t,s){return Ye(t,new V.classes.URLSearchParams,Object.assign({visitor:function(n,e,r,l){return V.isNode&&$.isBuffer(n)?(this.append(e,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},s))}function wn(t){return $.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function vn(t){const s={},n=Object.keys(t);let e;const r=n.length;let l;for(e=0;e<r;e++)l=n[e],s[l]=t[l];return s}function ms(t){function s(n,e,r,l){let a=n[l++];if(a==="__proto__")return!0;const u=Number.isFinite(+a),m=l>=n.length;return a=!a&&$.isArray(r)?r.length:a,m?($.hasOwnProp(r,a)?r[a]=[r[a],e]:r[a]=e,!u):((!r[a]||!$.isObject(r[a]))&&(r[a]=[]),s(n,e,r[a],l)&&$.isArray(r[a])&&(r[a]=vn(r[a])),!u)}if($.isFormData(t)&&$.isFunction(t.entries)){const n={};return $.forEachEntry(t,(e,r)=>{s(wn(e),r,n,0)}),n}return null}function Fn(t,s,n){if($.isString(t))try{return(s||JSON.parse)(t),$.trim(t)}catch(e){if(e.name!=="SyntaxError")throw e}return(0,JSON.stringify)(t)}const Le={transitional:_s,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const e=n.getContentType()||"",r=e.indexOf("application/json")>-1,l=$.isObject(s);if(l&&$.isHTMLForm(s)&&(s=new FormData(s)),$.isFormData(s))return r?JSON.stringify(ms(s)):s;if($.isArrayBuffer(s)||$.isBuffer(s)||$.isStream(s)||$.isFile(s)||$.isBlob(s)||$.isReadableStream(s))return s;if($.isArrayBufferView(s))return s.buffer;if($.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let u;if(l){if(e.indexOf("application/x-www-form-urlencoded")>-1)return Dn(s,this.formSerializer).toString();if((u=$.isFileList(s))||e.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Ye(u?{"files[]":s}:s,m&&new m,this.formSerializer)}}return l||r?(n.setContentType("application/json",!1),Fn(s)):s}],transformResponse:[function(s){const n=this.transitional||Le.transitional,e=n&&n.forcedJSONParsing,r=this.responseType==="json";if($.isResponse(s)||$.isReadableStream(s))return s;if(s&&$.isString(s)&&(e&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(s)}catch(u){if(a)throw u.name==="SyntaxError"?O.from(u,O.ERR_BAD_RESPONSE,this,null,this.response):u}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:V.classes.FormData,Blob:V.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],t=>{Le.headers[t]={}});const Un=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hn=t=>{const s={};let n,e,r;return t&&t.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),e=a.substring(r+1).trim(),!(!n||s[n]&&Un[n])&&(n==="set-cookie"?s[n]?s[n].push(e):s[n]=[e]:s[n]=s[n]?s[n]+", "+e:e)}),s},wt=Symbol("internals");function be(t){return t&&String(t).trim().toLowerCase()}function Pe(t){return t===!1||t==null?t:$.isArray(t)?t.map(Pe):String(t)}function Vn(t){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let e;for(;e=n.exec(t);)s[e[1]]=e[2];return s}const Gn=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function et(t,s,n,e,r){if($.isFunction(e))return e.call(this,s,n);if(r&&(s=n),!!$.isString(s)){if($.isString(e))return s.indexOf(e)!==-1;if($.isRegExp(e))return e.test(s)}}function Yn(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,e)=>n.toUpperCase()+e)}function Kn(t,s){const n=$.toCamelCase(" "+s);["get","set","has"].forEach(e=>{Object.defineProperty(t,e+n,{value:function(r,l,a){return this[e].call(this,s,r,l,a)},configurable:!0})})}class G{constructor(s){s&&this.set(s)}set(s,n,e){const r=this;function l(u,m,_){const p=be(m);if(!p)throw new Error("header name must be a non-empty string");const T=$.findKey(r,p);(!T||r[T]===void 0||_===!0||_===void 0&&r[T]!==!1)&&(r[T||m]=Pe(u))}const a=(u,m)=>$.forEach(u,(_,p)=>l(_,p,m));if($.isPlainObject(s)||s instanceof this.constructor)a(s,n);else if($.isString(s)&&(s=s.trim())&&!Gn(s))a(Hn(s),n);else if($.isHeaders(s))for(const[u,m]of s.entries())l(m,u,e);else s!=null&&l(n,s,e);return this}get(s,n){if(s=be(s),s){const e=$.findKey(this,s);if(e){const r=this[e];if(!n)return r;if(n===!0)return Vn(r);if($.isFunction(n))return n.call(this,r,e);if($.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=be(s),s){const e=$.findKey(this,s);return!!(e&&this[e]!==void 0&&(!n||et(this,this[e],e,n)))}return!1}delete(s,n){const e=this;let r=!1;function l(a){if(a=be(a),a){const u=$.findKey(e,a);u&&(!n||et(e,e[u],u,n))&&(delete e[u],r=!0)}}return $.isArray(s)?s.forEach(l):l(s),r}clear(s){const n=Object.keys(this);let e=n.length,r=!1;for(;e--;){const l=n[e];(!s||et(this,this[l],l,s,!0))&&(delete this[l],r=!0)}return r}normalize(s){const n=this,e={};return $.forEach(this,(r,l)=>{const a=$.findKey(e,l);if(a){n[a]=Pe(r),delete n[l];return}const u=s?Yn(l):String(l).trim();u!==l&&delete n[l],n[u]=Pe(r),e[u]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return $.forEach(this,(e,r)=>{e!=null&&e!==!1&&(n[r]=s&&$.isArray(e)?e.join(", "):e)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const e=new this(s);return n.forEach(r=>e.set(r)),e}static accessor(s){const e=(this[wt]=this[wt]={accessors:{}}).accessors,r=this.prototype;function l(a){const u=be(a);e[u]||(Kn(r,a),e[u]=!0)}return $.isArray(s)?s.forEach(l):l(s),this}}G.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(G.prototype,({value:t},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(e){this[n]=e}}});$.freezeMethods(G);function tt(t,s){const n=this||Le,e=s||n,r=G.from(e.headers);let l=e.data;return $.forEach(t,function(u){l=u.call(n,l,r.normalize(),s?s.status:void 0)}),r.normalize(),l}function Ts(t){return!!(t&&t.__CANCEL__)}function fe(t,s,n){O.call(this,t??"canceled",O.ERR_CANCELED,s,n),this.name="CanceledError"}$.inherits(fe,O,{__CANCEL__:!0});function hs(t,s,n){const e=n.config.validateStatus;!n.status||!e||e(n.status)?t(n):s(new O("Request failed with status code "+n.status,[O.ERR_BAD_REQUEST,O.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Xn(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function Wn(t,s){t=t||10;const n=new Array(t),e=new Array(t);let r=0,l=0,a;return s=s!==void 0?s:1e3,function(m){const _=Date.now(),p=e[l];a||(a=_),n[r]=m,e[r]=_;let T=l,y=0;for(;T!==r;)y+=n[T++],T=T%t;if(r=(r+1)%t,r===l&&(l=(l+1)%t),_-a<s)return;const R=p&&_-p;return R?Math.round(y*1e3/R):void 0}}function jn(t,s){let n=0,e=1e3/s,r,l;const a=(_,p=Date.now())=>{n=p,r=null,l&&(clearTimeout(l),l=null),t.apply(null,_)};return[(..._)=>{const p=Date.now(),T=p-n;T>=e?a(_,p):(r=_,l||(l=setTimeout(()=>{l=null,a(r)},e-T)))},()=>r&&a(r)]}const De=(t,s,n=3)=>{let e=0;const r=Wn(50,250);return jn(l=>{const a=l.loaded,u=l.lengthComputable?l.total:void 0,m=a-e,_=r(m),p=a<=u;e=a;const T={loaded:a,total:u,progress:u?a/u:void 0,bytes:m,rate:_||void 0,estimated:_&&u&&p?(u-a)/_:void 0,event:l,lengthComputable:u!=null,[s?"download":"upload"]:!0};t(T)},n)},vt=(t,s)=>{const n=t!=null;return[e=>s[0]({lengthComputable:n,total:t,loaded:e}),s[1]]},Ft=t=>(...s)=>$.asap(()=>t(...s)),qn=V.hasStandardBrowserEnv?function(){const s=V.navigator&&/(msie|trident)/i.test(V.navigator.userAgent),n=document.createElement("a");let e;function r(l){let a=l;return s&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(a){const u=$.isString(a)?r(a):a;return u.protocol===e.protocol&&u.host===e.host}}():function(){return function(){return!0}}(),Jn=V.hasStandardBrowserEnv?{write(t,s,n,e,r,l){const a=[t+"="+encodeURIComponent(s)];$.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),$.isString(e)&&a.push("path="+e),$.isString(r)&&a.push("domain="+r),l===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function zn(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Qn(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Es(t,s){return t&&!zn(s)?Qn(t,s):s}const Ut=t=>t instanceof G?{...t}:t;function $e(t,s){s=s||{};const n={};function e(_,p,T){return $.isPlainObject(_)&&$.isPlainObject(p)?$.merge.call({caseless:T},_,p):$.isPlainObject(p)?$.merge({},p):$.isArray(p)?p.slice():p}function r(_,p,T){if($.isUndefined(p)){if(!$.isUndefined(_))return e(void 0,_,T)}else return e(_,p,T)}function l(_,p){if(!$.isUndefined(p))return e(void 0,p)}function a(_,p){if($.isUndefined(p)){if(!$.isUndefined(_))return e(void 0,_)}else return e(void 0,p)}function u(_,p,T){if(T in s)return e(_,p);if(T in t)return e(void 0,_)}const m={url:l,method:l,data:l,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(_,p)=>r(Ut(_),Ut(p),!0)};return $.forEach(Object.keys(Object.assign({},t,s)),function(p){const T=m[p]||r,y=T(t[p],s[p],p);$.isUndefined(y)&&T!==u||(n[p]=y)}),n}const gs=t=>{const s=$e({},t);let{data:n,withXSRFToken:e,xsrfHeaderName:r,xsrfCookieName:l,headers:a,auth:u}=s;s.headers=a=G.from(a),s.url=ps(Es(s.baseURL,s.url),t.params,t.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let m;if($.isFormData(n)){if(V.hasStandardBrowserEnv||V.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((m=a.getContentType())!==!1){const[_,...p]=m?m.split(";").map(T=>T.trim()).filter(Boolean):[];a.setContentType([_||"multipart/form-data",...p].join("; "))}}if(V.hasStandardBrowserEnv&&(e&&$.isFunction(e)&&(e=e(s)),e||e!==!1&&qn(s.url))){const _=r&&l&&Jn.read(l);_&&a.set(r,_)}return s},Zn=typeof XMLHttpRequest<"u",er=Zn&&function(t){return new Promise(function(n,e){const r=gs(t);let l=r.data;const a=G.from(r.headers).normalize();let{responseType:u,onUploadProgress:m,onDownloadProgress:_}=r,p,T,y,R,E;function f(){R&&R(),E&&E(),r.cancelToken&&r.cancelToken.unsubscribe(p),r.signal&&r.signal.removeEventListener("abort",p)}let g=new XMLHttpRequest;g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout;function L(){if(!g)return;const M=G.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),C={data:!u||u==="text"||u==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:M,config:t,request:g};hs(function(z){n(z),f()},function(z){e(z),f()},C),g=null}"onloadend"in g?g.onloadend=L:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(L)},g.onabort=function(){g&&(e(new O("Request aborted",O.ECONNABORTED,t,g)),g=null)},g.onerror=function(){e(new O("Network Error",O.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let F=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const C=r.transitional||_s;r.timeoutErrorMessage&&(F=r.timeoutErrorMessage),e(new O(F,C.clarifyTimeoutError?O.ETIMEDOUT:O.ECONNABORTED,t,g)),g=null},l===void 0&&a.setContentType(null),"setRequestHeader"in g&&$.forEach(a.toJSON(),function(F,C){g.setRequestHeader(C,F)}),$.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),u&&u!=="json"&&(g.responseType=r.responseType),_&&([y,E]=De(_,!0),g.addEventListener("progress",y)),m&&g.upload&&([T,R]=De(m),g.upload.addEventListener("progress",T),g.upload.addEventListener("loadend",R)),(r.cancelToken||r.signal)&&(p=M=>{g&&(e(!M||M.type?new fe(null,t,g):M),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(p),r.signal&&(r.signal.aborted?p():r.signal.addEventListener("abort",p)));const A=Xn(r.url);if(A&&V.protocols.indexOf(A)===-1){e(new O("Unsupported protocol "+A+":",O.ERR_BAD_REQUEST,t));return}g.send(l||null)})},tr=(t,s)=>{const{length:n}=t=t?t.filter(Boolean):[];if(s||n){let e=new AbortController,r;const l=function(_){if(!r){r=!0,u();const p=_ instanceof Error?_:this.reason;e.abort(p instanceof O?p:new fe(p instanceof Error?p.message:p))}};let a=s&&setTimeout(()=>{a=null,l(new O(`timeout ${s} of ms exceeded`,O.ETIMEDOUT))},s);const u=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(_=>{_.unsubscribe?_.unsubscribe(l):_.removeEventListener("abort",l)}),t=null)};t.forEach(_=>_.addEventListener("abort",l));const{signal:m}=e;return m.unsubscribe=()=>$.asap(u),m}},sr=function*(t,s){let n=t.byteLength;if(n<s){yield t;return}let e=0,r;for(;e<n;)r=e+s,yield t.slice(e,r),e=r},or=async function*(t,s){for await(const n of nr(t))yield*sr(n,s)},nr=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:n,value:e}=await s.read();if(n)break;yield e}}finally{await s.cancel()}},Ht=(t,s,n,e)=>{const r=or(t,s);let l=0,a,u=m=>{a||(a=!0,e&&e(m))};return new ReadableStream({async pull(m){try{const{done:_,value:p}=await r.next();if(_){u(),m.close();return}let T=p.byteLength;if(n){let y=l+=T;n(y)}m.enqueue(new Uint8Array(p))}catch(_){throw u(_),_}},cancel(m){return u(m),r.return()}},{highWaterMark:2})},Ke=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fs=Ke&&typeof ReadableStream=="function",rr=Ke&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),bs=(t,...s)=>{try{return!!t(...s)}catch{return!1}},ir=fs&&bs(()=>{let t=!1;const s=new Request(V.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),Vt=64*1024,at=fs&&bs(()=>$.isReadableStream(new Response("").body)),we={stream:at&&(t=>t.body)};Ke&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!we[s]&&(we[s]=$.isFunction(t[s])?n=>n[s]():(n,e)=>{throw new O(`Response type '${s}' is not supported`,O.ERR_NOT_SUPPORT,e)})})})(new Response);const lr=async t=>{if(t==null)return 0;if($.isBlob(t))return t.size;if($.isSpecCompliantForm(t))return(await new Request(V.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if($.isArrayBufferView(t)||$.isArrayBuffer(t))return t.byteLength;if($.isURLSearchParams(t)&&(t=t+""),$.isString(t))return(await rr(t)).byteLength},ar=async(t,s)=>{const n=$.toFiniteNumber(t.getContentLength());return n??lr(s)},cr=Ke&&(async t=>{let{url:s,method:n,data:e,signal:r,cancelToken:l,timeout:a,onDownloadProgress:u,onUploadProgress:m,responseType:_,headers:p,withCredentials:T="same-origin",fetchOptions:y}=gs(t);_=_?(_+"").toLowerCase():"text";let R=tr([r,l&&l.toAbortSignal()],a),E;const f=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let g;try{if(m&&ir&&n!=="get"&&n!=="head"&&(g=await ar(p,e))!==0){let C=new Request(s,{method:"POST",body:e,duplex:"half"}),P;if($.isFormData(e)&&(P=C.headers.get("content-type"))&&p.setContentType(P),C.body){const[z,oe]=vt(g,De(Ft(m)));e=Ht(C.body,Vt,z,oe)}}$.isString(T)||(T=T?"include":"omit");const L="credentials"in Request.prototype;E=new Request(s,{...y,signal:R,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:e,duplex:"half",credentials:L?T:void 0});let A=await fetch(E);const M=at&&(_==="stream"||_==="response");if(at&&(u||M&&f)){const C={};["status","statusText","headers"].forEach(ae=>{C[ae]=A[ae]});const P=$.toFiniteNumber(A.headers.get("content-length")),[z,oe]=u&&vt(P,De(Ft(u),!0))||[];A=new Response(Ht(A.body,Vt,z,()=>{oe&&oe(),f&&f()}),C)}_=_||"text";let F=await we[$.findKey(we,_)||"text"](A,t);return!M&&f&&f(),await new Promise((C,P)=>{hs(C,P,{data:F,headers:G.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:E})})}catch(L){throw f&&f(),L&&L.name==="TypeError"&&/fetch/i.test(L.message)?Object.assign(new O("Network Error",O.ERR_NETWORK,t,E),{cause:L.cause||L}):O.from(L,L&&L.code,t,E)}}),ct={http:On,xhr:er,fetch:cr};$.forEach(ct,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Gt=t=>`- ${t}`,ur=t=>$.isFunction(t)||t===null||t===!1,Ss={getAdapter:t=>{t=$.isArray(t)?t:[t];const{length:s}=t;let n,e;const r={};for(let l=0;l<s;l++){n=t[l];let a;if(e=n,!ur(n)&&(e=ct[(a=String(n)).toLowerCase()],e===void 0))throw new O(`Unknown adapter '${a}'`);if(e)break;r[a||"#"+l]=e}if(!e){const l=Object.entries(r).map(([u,m])=>`adapter ${u} `+(m===!1?"is not supported by the environment":"is not available in the build"));let a=s?l.length>1?`since :
`+l.map(Gt).join(`
`):" "+Gt(l[0]):"as no adapter specified";throw new O("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return e},adapters:ct};function st(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fe(null,t)}function Yt(t){return st(t),t.headers=G.from(t.headers),t.data=tt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ss.getAdapter(t.adapter||Le.adapter)(t).then(function(e){return st(t),e.data=tt.call(t,t.transformResponse,e),e.headers=G.from(e.headers),e},function(e){return Ts(e)||(st(t),e&&e.response&&(e.response.data=tt.call(t,t.transformResponse,e.response),e.response.headers=G.from(e.response.headers))),Promise.reject(e)})}const Is="1.7.7",Et={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Et[t]=function(e){return typeof e===t||"a"+(s<1?"n ":" ")+t}});const Kt={};Et.transitional=function(s,n,e){function r(l,a){return"[Axios v"+Is+"] Transitional option '"+l+"'"+a+(e?". "+e:"")}return(l,a,u)=>{if(s===!1)throw new O(r(a," has been removed"+(n?" in "+n:"")),O.ERR_DEPRECATED);return n&&!Kt[a]&&(Kt[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(l,a,u):!0}};function dr(t,s,n){if(typeof t!="object")throw new O("options must be an object",O.ERR_BAD_OPTION_VALUE);const e=Object.keys(t);let r=e.length;for(;r-- >0;){const l=e[r],a=s[l];if(a){const u=t[l],m=u===void 0||a(u,l,t);if(m!==!0)throw new O("option "+l+" must be "+m,O.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new O("Unknown option "+l,O.ERR_BAD_OPTION)}}const ut={assertOptions:dr,validators:Et},re=ut.validators;class de{constructor(s){this.defaults=s,this.interceptors={request:new Dt,response:new Dt}}async request(s,n){try{return await this._request(s,n)}catch(e){if(e instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const l=r.stack?r.stack.replace(/^.+\n/,""):"";try{e.stack?l&&!String(e.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(e.stack+=`
`+l):e.stack=l}catch{}}throw e}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=$e(this.defaults,n);const{transitional:e,paramsSerializer:r,headers:l}=n;e!==void 0&&ut.assertOptions(e,{silentJSONParsing:re.transitional(re.boolean),forcedJSONParsing:re.transitional(re.boolean),clarifyTimeoutError:re.transitional(re.boolean)},!1),r!=null&&($.isFunction(r)?n.paramsSerializer={serialize:r}:ut.assertOptions(r,{encode:re.function,serialize:re.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=l&&$.merge(l.common,l[n.method]);l&&$.forEach(["delete","get","head","post","put","patch","common"],E=>{delete l[E]}),n.headers=G.concat(a,l);const u=[];let m=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(m=m&&f.synchronous,u.unshift(f.fulfilled,f.rejected))});const _=[];this.interceptors.response.forEach(function(f){_.push(f.fulfilled,f.rejected)});let p,T=0,y;if(!m){const E=[Yt.bind(this),void 0];for(E.unshift.apply(E,u),E.push.apply(E,_),y=E.length,p=Promise.resolve(n);T<y;)p=p.then(E[T++],E[T++]);return p}y=u.length;let R=n;for(T=0;T<y;){const E=u[T++],f=u[T++];try{R=E(R)}catch(g){f.call(this,g);break}}try{p=Yt.call(this,R)}catch(E){return Promise.reject(E)}for(T=0,y=_.length;T<y;)p=p.then(_[T++],_[T++]);return p}getUri(s){s=$e(this.defaults,s);const n=Es(s.baseURL,s.url);return ps(n,s.params,s.paramsSerializer)}}$.forEach(["delete","get","head","options"],function(s){de.prototype[s]=function(n,e){return this.request($e(e||{},{method:s,url:n,data:(e||{}).data}))}});$.forEach(["post","put","patch"],function(s){function n(e){return function(l,a,u){return this.request($e(u||{},{method:s,headers:e?{"Content-Type":"multipart/form-data"}:{},url:l,data:a}))}}de.prototype[s]=n(),de.prototype[s+"Form"]=n(!0)});class gt{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const e=this;this.promise.then(r=>{if(!e._listeners)return;let l=e._listeners.length;for(;l-- >0;)e._listeners[l](r);e._listeners=null}),this.promise.then=r=>{let l;const a=new Promise(u=>{e.subscribe(u),l=u}).then(r);return a.cancel=function(){e.unsubscribe(l)},a},s(function(l,a,u){e.reason||(e.reason=new fe(l,a,u),n(e.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=e=>{s.abort(e)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new gt(function(r){s=r}),cancel:s}}}function $r(t){return function(n){return t.apply(null,n)}}function pr(t){return $.isObject(t)&&t.isAxiosError===!0}const dt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(dt).forEach(([t,s])=>{dt[s]=t});function Os(t){const s=new de(t),n=ts(de.prototype.request,s);return $.extend(n,de.prototype,s,{allOwnKeys:!0}),$.extend(n,s,null,{allOwnKeys:!0}),n.create=function(r){return Os($e(t,r))},n}const B=Os(Le);B.Axios=de;B.CanceledError=fe;B.CancelToken=gt;B.isCancel=Ts;B.VERSION=Is;B.toFormData=Ye;B.AxiosError=O;B.Cancel=B.CanceledError;B.all=function(s){return Promise.all(s)};B.spread=$r;B.isAxiosError=pr;B.mergeConfig=$e;B.AxiosHeaders=G;B.formToJSON=t=>ms($.isHTMLForm(t)?new FormData(t):t);B.getAdapter=Ss.getAdapter;B.HttpStatusCode=dt;B.default=B;const Te=B.create({baseURL:"http://localhost:3000",timeout:5e3,headers:{"Content-Type":"application/json"}}),Xe=()=>({createWorkspace:async(a,u=!1)=>(await Te.post("/workspace",{userId:a},{headers:{"user-id":a,sample:u}})).data,getWorkspaceList:async(a,u)=>(await Te.get(`/workspace/list${u!=="null"?`?cursor=${encodeURIComponent(u)}`:""}`,{headers:{"user-id":a}})).data,getWorkspace:async(a,u)=>(await Te.get(`/workspace?workspaceId=${u}`,{headers:{"user-id":a}})).data,updateWorkspaceName:async(a,u,m)=>(await Te.patch("/workspace/name",{workspaceId:u,newName:m},{headers:{"user-id":a}})).data,deleteWorkspace:async(a,u)=>{await Te.delete(`/workspace?workspaceId=${u}`,{headers:{"user-id":a}})},saveWorkspace:async(a,u,m,_,p,T,y)=>{const R=new FormData;R.append("workspaceId",u),R.append("totalCssPropertyObj",JSON.stringify(m)),R.append("canvas",JSON.stringify(_)),R.append("classBlockList",JSON.stringify(p)),R.append("cssResetStatus",T.toString()),R.append("thumbnail",y),await Te.patch("/workspace",R,{headers:{"user-id":a,"Content-Type":"multipart/form-data"}})}}),ft=(t=!1)=>{const s=Xe(),n=Eo(),e=$t(a=>a.setIsPending),r=Ae(),{mutate:l}=Ue({mutationFn:()=>{e(!0);const a=ve()||Fe();return s.createWorkspace(a,t)},onSuccess:a=>{r.invalidateQueries({queryKey:Ee.list()}),t||n(`/workspace/${a.newWorkspaceId}`)},onError:()=>{H.error("워크스페이스 생성 실패")},onSettled:()=>{e(!1)}});return{mutate:l}},_r={containerCategory:{colour:"FF3A61"},textCategory:{colour:"FFD900"},formCategory:{colour:"FF9821"},tableCategory:{colour:"B223F5"},listCategory:{colour:"3E84FF"},etcCategory:{colour:"00AF6F"}},Z={kind:"categoryToolbox",contents:[]},mr=Se.dom;class wa extends Co{constructor(){super(...arguments);q(this,"textGroup_");q(this,"backgroundRect_");q(this,"isFixed",!1);q(this,"width",0)}updateWidth(n){this.width=n,this.render_()}updateSize_(n){const e=this.getConstants(),r=n!==void 0?n:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let l=r*2,a=e.FIELD_TEXT_HEIGHT;this.width=Math.max(e.EMPTY_INLINE_INPUT_PADDING+8,this.width);let u=0;this.textElement_&&(u=mr.getFastTextWidth(this.textElement_,e.FIELD_TEXT_FONTSIZE,e.FIELD_TEXT_FONTWEIGHT,e.FIELD_TEXT_FONTFAMILY),l+=u),this.isFullBlockField()||(a=Math.max(a,e.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=a,this.size_.width=Math.max(l,this.width),this.positionTextElement_(r,u),this.positionBorderRect_()}}const Tr=[{kind:"block",type:S("div"),description:`여러 내용을 담을 수 있는 상자예요.
레고 블록처럼 여러 개를 쌓을 수 있어요.`},{kind:"block",type:S("span"),description:`글자나 작은 내용을 감싸는 작은 상자예요.
문장 중간에 넣을 수 있어요.`},{kind:"block",type:S("header"),description:`웹페이지의 머리 부분이에요.
보통 로고나 메뉴가 들어가는 곳이에요.`},{kind:"block",type:S("section"),description:`비슷한 내용들을 모아두는 구역이에요.
책의 한 챕터같은 거예요.`},{kind:"block",type:S("nav"),description:"웹사이트에서 다른 페이지로 이동할 수 있는 메뉴가 있는 곳이에요."},{kind:"block",type:S("main"),description:`페이지에서 가장 중요한 내용이 들어가는 곳이에요.
책의 본문 같은 거예요.`},{kind:"block",type:S("article"),description:`하나의 완성된 이야기나 내용을 담는 곳이에요.
신문 기사처럼요.`},{kind:"block",type:S("footer"),description:`웹페이지의 맨 아래 부분이에요.
주소나 연락처 같은 정보가 들어가요.`}],hr=[{kind:"block",type:S("p"),description:`문단을 만드는 태그예요.
하나의 생각이나 이야기를 묶어서 쓸 때 사용해요.`},{kind:"block",type:S("strong"),description:"정말 중요한 내용을 굵은 글씨로 보여줄 때 사용해요."},{kind:"block",type:S("h1"),description:`가장 큰 제목을 쓸 때 사용해요.
책의 제목같은 거예요.`},{kind:"block",type:S("h2"),description:`두 번째로 큰 제목이에요.
책의 장(章) 제목 같은 거예요.`},{kind:"block",type:S("h3"),description:`세 번째로 큰 제목이에요.
책의 절(節) 제목 같은 거예요.`},{kind:"block",type:S("h4"),description:`네 번째로 큰 제목이에요.
작은 주제를 쓸 때 사용해요.`},{kind:"block",type:S("h5"),description:`다섯 번째로 큰 제목이에요.
아주 작은 주제를 쓸 때 사용해요.`},{kind:"block",type:S("h6"),description:`가장 작은 제목이에요.
제일 세세한 주제를 쓸 때 사용해요.`},{kind:"block",type:S("small"),description:`작은 글씨로 보여주고 싶을 때 사용해요.
부가 설명을 쓸 때 좋아요.`},{kind:"block",type:S("br"),description:`줄을 바꾸고 싶을 때 사용해요.
엔터 키를 누른 것처럼요.`},{kind:"block",type:S("em"),description:"글씨를 기울여서 강조하고 싶을 때 사용해요."},{kind:"block",type:S("i"),description:"글씨를 기울여 쓰고 싶을 때 사용해요."},{kind:"block",type:S("blockquote"),description:`다른 사람의 말을 인용할 때 사용해요.
책에서 따온 문장 같은 거예요.`},{kind:"block",type:S("hr"),description:"가로줄을 그어서 내용을 구분하고 싶을 때 사용해요."}],Er=[{kind:"block",type:S("button"),description:`클릭할 수 있는 버튼이에요.
제출하기나 확인 같은 동작을 할 때 사용해요.`},{kind:"block",type:S("option"),description:`선택할 수 있는 항목 하나를 나타내요.
여러 가지 중에 고를 수 있어요.`},{kind:"block",type:S("textarea"),description:`긴 글을 쓸 수 있는 큰 입력창이에요.
게시글이나 댓글을 쓸 때 사용해요.`},{kind:"block",type:S("select"),description:`여러 개 중에서 하나를 선택할 수 있는 목록이에요.
드롭다운 메뉴같은 거예요.`}],gr=[{kind:"block",type:S("td"),description:`표의 칸 하나예요.
내용을 채워 넣을 수 있어요.`},{kind:"block",type:S("tr"),description:`표의 가로줄 하나예요.
여러 칸을 옆으로 나열할 수 있어요.`},{kind:"block",type:S("th"),description:`표의 제목 칸이에요.
각 항목이 무엇을 의미하는지 설명해요.`},{kind:"block",type:S("caption"),description:`표의 제목이에요.
표가 어떤 내용인지 설명해줘요.`},{kind:"block",type:S("table"),description:`표를 만들 때 사용해요.
시간표나 성적표 같은 걸 만들 수 있어요.`}],fr=[{kind:"block",type:S("ul"),description:`순서가 없는 목록을 만들어요.
점이나 동그라미로 항목을 구분해요.`},{kind:"block",type:S("ol"),description:`순서가 있는 목록을 만들어요.
1, 2, 3처럼 숫자로 항목을 구분해요.`},{kind:"block",type:S("li"),description:`목록의 각 항목이에요.
하나하나의 내용을 적을 수 있어요.`}],br=[{kind:"block",type:S("text"),description:`일반 글자를 보여주는 기본 텍스트예요.
특별한 꾸밈이 없는 평범한 글자랍니다.`}],ce={container:Tr,text:hr,form:Er,table:gr,list:fr,etc:br},ee=new No("HTML"),bt=t=>{ee.forBlock[t]=function(s){let n="";const e=s.getInputTargetBlock("css class");e&&(n=e.getFieldValue("CLASS")||"");const r=ee.statementToCode(s,"children").trim(),l=s.id;return r?`<${Me(t)} class="${n}" data-block-id="${l}">
${r}
</${Me(t)}>`:`<${Me(t)} class="${n}" data-block-id="${l}">
</${Me(t)}>`}},va=t=>t.getTopBlocks(!0).filter(e=>e.getRootBlock().type===S("html")).map(e=>{try{return ee.blockToCode(e)||""}catch(r){return console.error(`블록 ${e.type} 처리 중 오류 발생:`,r),""}}).join(`
`),Fa=t=>{let s=t.replace(/ data-block-id="[^"]*"/g,"");return s=s.replace(/<span[^>]*data-type="text-block"[^>]*>(.*?)<\/span>/g,"$1"),s};ee.forBlock[S("text")]=function(t){const s=t.getFieldValue("TEXT"),n=t.id,e=s.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");return`<span data-block-id="${n}" data-type="text-block">${e}</span>`};ee.forBlock[S("css_style")]=function(t){return t.getFieldValue("CLASS")};ee.forBlock[S("head")]=function(t){return`<head data-block-id="${t.id}"> </head>`};ee.forBlock[S("hr")]=function(t){return`<hr data-block-id="${t.id}" />`};ee.forBlock[S("br")]=function(t){return`<br data-block-id="${t.id}" />`};ee.scrub_=function(t,s,n){if(t.getRootBlock().type!==S("html"))return"";const r=t.nextConnection&&t.nextConnection.targetBlock();return r&&!n?s+`
`+ee.blockToCode(r):s};bt(S("html"));bt(S("body"));Object.values(ce).forEach(t=>{t.forEach(s=>{s.type!==S("text")&&s.type!==S("hr")&&s.type!==S("br")&&bt(s.type)})});const Sr={kind:"categoryToolbox",contents:[{kind:"category",name:"컨테이너",categorystyle:"containerCategory",contents:ce.container},{kind:"category",name:"텍스트",categorystyle:"textCategory",contents:ce.text},{kind:"category",name:"폼",categorystyle:"formCategory",contents:ce.form},{kind:"category",name:"표",categorystyle:"tableCategory",contents:ce.table},{kind:"category",name:"리스트",categorystyle:"listCategory",contents:ce.list},{kind:"category",name:"내용",categorystyle:"etcCategory",contents:ce.etc}]};var Rs={exports:{}};(function(t,s){(function(n,e){t.exports=e($o)})(ao,function(n){var e=n.__namespace__,r=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),l={customContextMenu:function(o){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(c={text:e.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:a(this)},d=this.getField("VAR").getText(),d={text:e.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",d),enabled:!0,callback:u(this)},o.unshift(c),o.unshift(d));else{if(this.type==="variables_get_dynamic")var i="variables_set_dynamic",c=e.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else i="variables_get_dynamic",c=e.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var d=this.getField("VAR");i={type:i,fields:{VAR:d.saveState(!0)}},o.push({enabled:0<this.workspace.remainingCapacity(),text:c.replace("%1",d.getText()),callback:e.callbackFactory$$module$build$src$core$contextmenu(this,i)})}},onchange:function(o){o=this.getFieldValue("VAR"),o=e.getVariable$$module$build$src$core$variables(this.workspace,o),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(o.type):this.getInput("VALUE").connection.setCheck(o.type)}},a=function(o){return function(){const i=o.workspace,c=o.getField("VAR").getVariable();e.renameVariable$$module$build$src$core$variables(i,c)}},u=function(o){return function(){const i=o.workspace,c=o.getField("VAR").getVariable();i.deleteVariableById(c.getId()),i.refreshToolboxSelection()}};e.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",l),e.defineBlocks$$module$build$src$core$common(r);var m={blocks:r},_=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),p={customContextMenu:function(o){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(c={text:e.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:T(this)},d=this.getField("VAR").getText(),d={text:e.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",d),enabled:!0,callback:y(this)},o.unshift(c),o.unshift(d));else{if(this.type==="variables_get")var i="variables_set",c=e.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else i="variables_get",c=e.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var d=this.getField("VAR");i={type:i,fields:{VAR:d.saveState(!0)}},o.push({enabled:0<this.workspace.remainingCapacity(),text:c.replace("%1",d.getText()),callback:e.callbackFactory$$module$build$src$core$contextmenu(this,i)})}}},T=function(o){return function(){const i=o.workspace,c=o.getField("VAR").getVariable();e.renameVariable$$module$build$src$core$variables(i,c)}},y=function(o){return function(){const i=o.workspace,c=o.getField("VAR").getVariable();i.deleteVariableById(c.getId()),i.refreshToolboxSelection()}};e.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",p),e.defineBlocks$$module$build$src$core$common(_);var R={blocks:_},E=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),f={init:function(){this.WHERE_OPTIONS_1=[[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation");var i=this.getInput("AT1")instanceof e.ValueInput$$module$build$src$core$inputs$value_input;return o.setAttribute("at1",`${i}`),i=this.getInput("AT2")instanceof e.ValueInput$$module$build$src$core$inputs$value_input,o.setAttribute("at2",`${i}`),o},domToMutation:function(o){const i=o.getAttribute("at1")==="true";o=o.getAttribute("at2")==="true",this.updateAt_(1,i),this.updateAt_(2,o)},updateAt_:function(o,i){this.removeInput("AT"+o),this.removeInput("ORDINAL"+o,!0),i?(this.appendValueInput("AT"+o).setCheck("Number"),e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+o).appendField(e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+o),o===2&&e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));const c=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+o]});c.setValidator(function(d){const h=d==="FROM_START"||d==="FROM_END";if(h!==i){const N=this.getSourceBlock();return N.updateAt_(o,h),N.setFieldValue(d,"WHERE"+o),null}}),this.getInput("AT"+o).appendField(c,"WHERE"+o),o===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};E.text_getSubstring=f,E.text_changeCase={init:function(){const o=[[e.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[e.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[e.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(e.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:o}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},E.text_trim={init:function(){const o=[[e.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[e.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[e.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(e.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:o}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},E.text_print={init:function(){this.jsonInit({message0:e.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:e.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:e.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var g={updateType_:function(o){this.outputConnection.setCheck(o==="NUMBER"?"Number":"String")},mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation");return o.setAttribute("type",this.getFieldValue("TYPE")),o},domToMutation:function(o){this.updateType_(o.getAttribute("type"))}};E.text_prompt_ext=Object.assign({},g,{init:function(){var o=[[e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(e.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),o=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:o}),o.setValidator(i=>{this.updateType_(i)}),this.appendValueInput("TEXT").appendField(o,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});var L=Object.assign({},g,{init:function(){this.mixin(A);var o=[[e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(e.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),o=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:o}),o.setValidator(i=>{this.updateType_(i)}),this.appendDummyInput().appendField(o,"TYPE").appendField(this.newQuote_(!0)).appendField(e.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});E.text_prompt=L,E.text_count={init:function(){this.jsonInit({message0:e.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:e.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:e.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},E.text_replace={init:function(){this.jsonInit({message0:e.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:e.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},E.text_reverse={init:function(){this.jsonInit({message0:e.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:e.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var A={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(o){for(let i=0,c;c=this.inputList[i];i++)for(let d=0,h;h=c.fieldRow[d];d++)if(o===h.name){c.insertFieldAt(d,this.newQuote_(!0)),c.insertFieldAt(d+2,this.newQuote_(!1));return}console.warn('field named "'+o+'" not found in '+this.toDevString())},newQuote_:function(o){return o=this.RTL?!o:o,e.fromJson$$module$build$src$core$field_registry({type:"field_image",src:o?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:o?"“":"”"})}},M=function(){this.mixin(A),this.quoteField_("TEXT")},F={itemCount_:0,mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation");return o.setAttribute("items",`${this.itemCount_}`),o},domToMutation:function(o){this.itemCount_=parseInt(o.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(o){this.itemCount_=o.itemCount,this.updateShape_()},decompose:function(o){const i=o.newBlock("text_create_join_container");i.initSvg();let c=i.getInput("STACK").connection;for(let d=0;d<this.itemCount_;d++){const h=o.newBlock("text_create_join_item");h.initSvg(),c.connect(h.previousConnection),c=h.nextConnection}return i},compose:function(o){var i=o.getInputTargetBlock("STACK");for(o=[];i;)i.isInsertionMarker()||o.push(i.valueConnection_),i=i.getNextBlock();for(i=0;i<this.itemCount_;i++){const c=this.getInput("ADD"+i).connection.targetConnection;c&&!o.includes(c)&&c.disconnect()}for(this.itemCount_=o.length,this.updateShape_(),i=0;i<this.itemCount_;i++){let c;(c=o[i])==null||c.reconnect(this,"ADD"+i)}},saveConnections:function(o){o=o.getInputTargetBlock("STACK");let i=0;for(;o;){if(o.isInsertionMarker()){o=o.getNextBlock();continue}const c=this.getInput("ADD"+i);o.valueConnection_=c&&c.connection.targetConnection,o=o.getNextBlock(),i++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var o=0;o<this.itemCount_;o++)if(!this.getInput("ADD"+o)){const i=this.appendValueInput("ADD"+o).setAlign(e.Align$$module$build$src$core$inputs$align.RIGHT);o===0&&i.appendField(e.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(o=this.itemCount_;this.getInput("ADD"+o);o++)this.removeInput("ADD"+o)}},C=function(){this.mixin(A),this.itemCount_=2,this.updateShape_(),this.setMutator(new e.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};e.register$$module$build$src$core$extensions("text_append_tooltip",e.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var P=function(){this.setTooltip(()=>e.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},z={isAt_:!1,mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation");return o.setAttribute("at",`${this.isAt_}`),o},domToMutation:function(o){o=o.getAttribute("at")!=="false",this.updateAt_(o)},updateAt_:function(o){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),o&&(this.appendValueInput("AT").setCheck("Number"),e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),e.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=o}},oe=function(){this.getField("WHERE").setValidator(function(o){o=o==="FROM_START"||o==="FROM_END";const i=this.getSourceBlock();o!==i.isAt_&&i.updateAt_(o)}),this.updateAt_(!0),this.setTooltip(()=>{var o=this.getFieldValue("WHERE");let i=e.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(o==="FROM_START"||o==="FROM_END")&&(o=o==="FROM_START"?e.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(i+="  "+o.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),i})};e.register$$module$build$src$core$extensions("text_indexOf_tooltip",P),e.register$$module$build$src$core$extensions("text_quotes",M),e.registerMixin$$module$build$src$core$extensions("quote_image_mixin",A),e.registerMutator$$module$build$src$core$extensions("text_join_mutator",F,C),e.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",z,oe),e.defineBlocks$$module$build$src$core$common(E);var ae={blocks:E},Y={},x={setStatements_:function(o){this.hasStatements_!==o&&(o?(this.appendStatementInput("STACK").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=o)},updateParams_:function(){let o="";this.arguments_.length&&(o=e.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),e.disable$$module$build$src$core$events$utils();try{this.setFieldValue(o,"PARAMS")}finally{e.enable$$module$build$src$core$events$utils()}},mutationToDom:function(o){const i=e.createElement$$module$build$src$core$utils$xml("mutation");o&&i.setAttribute("name",this.getFieldValue("NAME"));for(let c=0;c<this.argumentVarModels_.length;c++){const d=e.createElement$$module$build$src$core$utils$xml("arg"),h=this.argumentVarModels_[c];d.setAttribute("name",h.name),d.setAttribute("varid",h.getId()),o&&this.paramIds_&&d.setAttribute("paramId",this.paramIds_[c]),i.appendChild(d)}return this.hasStatements_||i.setAttribute("statements","false"),i},domToMutation:function(o){this.arguments_=[],this.argumentVarModels_=[];for(let c=0,d;d=o.childNodes[c];c++)if(d.nodeName.toLowerCase()==="arg"){var i=d;const h=i.getAttribute("name");i=i.getAttribute("varid")||i.getAttribute("varId"),this.arguments_.push(h),i=e.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,i,h,""),i!==null?this.argumentVarModels_.push(i):console.log(`Failed to create a variable named "${h}", ignoring.`)}this.updateParams_(),e.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(o.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const o=Object.create(null);if(this.argumentVarModels_.length){o.params=[];for(let i=0;i<this.argumentVarModels_.length;i++)o.params.push({name:this.argumentVarModels_[i].name,id:this.argumentVarModels_[i].getId()})}return this.hasStatements_||(o.hasStatements=!1),o},loadExtraState:function(o){if(this.arguments_=[],this.argumentVarModels_=[],o.params)for(let c=0;c<o.params.length;c++){var i=o.params[c];i=e.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,i.id,i.name,""),this.arguments_.push(i.name),this.argumentVarModels_.push(i)}this.updateParams_(),e.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(o.hasStatements!==!1)},decompose:function(o){const i=e.createElement$$module$build$src$core$utils$xml("block");i.setAttribute("type","procedures_mutatorcontainer");var c=e.createElement$$module$build$src$core$utils$xml("statement");c.setAttribute("name","STACK"),i.appendChild(c);for(let h=0;h<this.arguments_.length;h++){const N=e.createElement$$module$build$src$core$utils$xml("block");N.setAttribute("type","procedures_mutatorarg");var d=e.createElement$$module$build$src$core$utils$xml("field");d.setAttribute("name","NAME");const Ne=e.createTextNode$$module$build$src$core$utils$xml(this.arguments_[h]);d.appendChild(Ne),N.appendChild(d),d=e.createElement$$module$build$src$core$utils$xml("next"),N.appendChild(d),c.appendChild(N),c=d}return o=e.domToBlock$$module$build$src$core$xml(i,o),this.type==="procedures_defreturn"?o.setFieldValue(this.hasStatements_,"STATEMENTS"):o.removeInput("STATEMENT_INPUT"),e.mutateCallers$$module$build$src$core$procedures(this),o},compose:function(o){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let i=o.getInputTargetBlock("STACK");for(;i&&!i.isInsertionMarker();){var c=i.getFieldValue("NAME");this.arguments_.push(c),c=this.workspace.getVariable(c,""),this.argumentVarModels_.push(c),this.paramIds_.push(i.id),i=i.nextConnection&&i.nextConnection.targetBlock()}if(this.updateParams_(),e.mutateCallers$$module$build$src$core$procedures(this),o=o.getFieldValue("STATEMENTS"),o!==null&&(o=o==="TRUE",this.hasStatements_!==o))if(o){this.setStatements_(!0);var d;(d=this.statementConnection_)==null||d.reconnect(this,"STACK"),this.statementConnection_=null}else d=this.getInput("STACK").connection,(this.statementConnection_=d.targetConnection)&&(d=d.targetBlock(),d.unplug(),d.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(o,i){var c=this.workspace.getVariableById(o);if(c.type===""){c=c.name,i=this.workspace.getVariableById(i);var d=!1;for(let h=0;h<this.argumentVarModels_.length;h++)this.argumentVarModels_[h].getId()===o&&(this.arguments_[h]=i.name,this.argumentVarModels_[h]=i,d=!0);d&&(this.displayRenamedVar_(c,i.name),e.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(o){const i=o.name;let c=!1,d;for(let h=0;h<this.argumentVarModels_.length;h++)this.argumentVarModels_[h].getId()===o.getId()&&(d=this.arguments_[h],this.arguments_[h]=i,c=!0);c&&(this.displayRenamedVar_(d,i),e.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(o,i){this.updateParams_();var c=this.getIcon(e.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(c&&c.bubbleIsVisible()){c=c.getWorkspace().getAllBlocks(!1);for(let d=0,h;h=c[d];d++)h.type==="procedures_mutatorarg"&&e.Names$$module$build$src$core$names.equals(o,h.getFieldValue("NAME"))&&h.setFieldValue(i,"NAME")}},customContextMenu:function(o){if(!this.isInFlyout){var i=this.getFieldValue("NAME"),c={type:this.callType_,extraState:{name:i,params:this.arguments_}};if(o.push({enabled:!0,text:e.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",i),callback:e.callbackFactory$$module$build$src$core$contextmenu(this,c)}),!this.isCollapsed())for(i=0;i<this.argumentVarModels_.length;i++){c=this.argumentVarModels_[i];const d={type:"variables_get",fields:{VAR:{name:c.name,id:c.getId(),type:c.type}}};o.push({enabled:!0,text:e.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",c.name),callback:e.callbackFactory$$module$build$src$core$contextmenu(this,d)})}}}};Y.procedures_defnoreturn=Object.assign({},x,{init:function(){var o=e.findLegalName$$module$build$src$core$procedures("",this);o=e.fromJson$$module$build$src$core$field_registry({type:"field_input",text:o}),o.setValidator(e.rename$$module$build$src$core$procedures),o.setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(o,"NAME").appendField("","PARAMS"),this.setMutator(new e.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),Y.procedures_defreturn=Object.assign({},x,{init:function(){var o=e.findLegalName$$module$build$src$core$procedures("",this);o=e.fromJson$$module$build$src$core$field_registry({type:"field_input",text:o}),o.setValidator(e.rename$$module$build$src$core$procedures),o.setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(o,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(e.Align$$module$build$src$core$inputs$align.RIGHT).appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new e.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var X={init:function(){this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(e.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};Y.procedures_mutatorcontainer=X;var D={init:function(){const o=e.fromJson$$module$build$src$core$field_registry({type:"field_input",text:e.DEFAULT_ARG$$module$build$src$core$procedures});o.setValidator(this.validator_),o.oldShowEditorFn_=o.showEditor_,o.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(o,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,o.onFinishEditing_=this.deleteIntermediateVars_,o.createdVariables_=[],o.onFinishEditing_("x")},validator_:function(o){var i=this.getSourceBlock();const c=i.workspace.getRootWorkspace();if(o=o.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!o)return null;const d=(i.workspace.targetWorkspace||i.workspace).getAllBlocks(!1),h=o.toLowerCase();for(let N=0;N<d.length;N++){if(d[N].id===this.getSourceBlock().id)continue;const Ne=d[N].getFieldValue("NAME");if(Ne&&Ne.toLowerCase()===h)return null}return i.isInFlyout||((i=c.getVariable(o,""))&&i.name!==o&&c.renameVariableById(i.getId(),o),i||(i=c.createVariable(o,""))&&this.createdVariables_&&this.createdVariables_.push(i)),o},deleteIntermediateVars_:function(o){const i=this.getSourceBlock().workspace.getRootWorkspace();if(i)for(let c=0;c<this.createdVariables_.length;c++){const d=this.createdVariables_[c];d.name!==o&&i.deleteVariableById(d.getId())}}};Y.procedures_mutatorarg=D;var w="DISABLED_PROCEDURE_DEFINITION",W={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(o,i){e.Names$$module$build$src$core$names.equals(o,this.getProcedureCall())&&(this.setFieldValue(i,"NAME"),this.setTooltip((this.outputConnection?e.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:e.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",i)))},setProcedureParameters_:function(o,i){var c=e.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((c=(c=c&&c.getIcon(e.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&c.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),o.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=i;else{if(i.length!==o.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let h=0;h<this.arguments_.length;h++){var d=this.getInput("ARG"+h);d&&(d=d.connection.targetConnection,this.quarkConnections_[this.quarkIds_[h]]=d,c&&d&&!i.includes(this.quarkIds_[h])&&(d.disconnect(),d.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(o),this.argumentVarModels_=[],o=0;o<this.arguments_.length;o++)c=e.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[o],""),this.argumentVarModels_.push(c);if(this.updateShape_(),this.quarkIds_=i){for(i=0;i<this.arguments_.length;i++)if(o=this.quarkIds_[i],o in this.quarkConnections_){let h;(h=this.quarkConnections_[o])!=null&&h.reconnect(this,"ARG"+i)||delete this.quarkConnections_[o]}}}},updateShape_:function(){for(var o=0;o<this.arguments_.length;o++){var i=this.getField("ARGNAME"+o);if(i){e.disable$$module$build$src$core$events$utils();try{i.setValue(this.arguments_[o])}finally{e.enable$$module$build$src$core$events$utils()}}else i=e.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[o]}),this.appendValueInput("ARG"+o).setAlign(e.Align$$module$build$src$core$inputs$align.RIGHT).appendField(i,"ARGNAME"+o)}for(o=this.arguments_.length;this.getInput("ARG"+o);o++)this.removeInput("ARG"+o);(o=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||o.appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&o.removeField("WITH"))},mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation");o.setAttribute("name",this.getProcedureCall());for(let i=0;i<this.arguments_.length;i++){const c=e.createElement$$module$build$src$core$utils$xml("arg");c.setAttribute("name",this.arguments_[i]),o.appendChild(c)}return o},domToMutation:function(o){var i=o.getAttribute("name");this.renameProcedure(this.getProcedureCall(),i),i=[];const c=[];for(let d=0,h;h=o.childNodes[d];d++)h.nodeName.toLowerCase()==="arg"&&(i.push(h.getAttribute("name")),c.push(h.getAttribute("paramId")));this.setProcedureParameters_(i,c)},saveExtraState:function(){const o=Object.create(null);return o.name=this.getProcedureCall(),this.arguments_.length&&(o.params=this.arguments_),o},loadExtraState:function(o){if(this.renameProcedure(this.getProcedureCall(),o.name),o=o.params){const i=[];i.length=o.length,i.fill(null),this.setProcedureParameters_(o,i)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(o){if(this.workspace&&!this.workspace.isFlyout&&o.recordUndo)if(o.type===e.CREATE$$module$build$src$core$events$utils&&o.ids.includes(this.id)){var i=this.getProcedureCall();if(i=e.getDefinition$$module$build$src$core$procedures(i,this.workspace),!i||i.type===this.defType_&&JSON.stringify(i.getVars())===JSON.stringify(this.arguments_)||(i=null),!i){e.setGroup$$module$build$src$core$events$utils(o.group),o=e.createElement$$module$build$src$core$utils$xml("xml"),i=e.createElement$$module$build$src$core$utils$xml("block"),i.setAttribute("type",this.defType_);var c=this.getRelativeToSurfaceXY(),d=c.y+2*e.config$$module$build$src$core$config.snapRadius;i.setAttribute("x",`${c.x+e.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),i.setAttribute("y",`${d}`),c=this.mutationToDom(),i.appendChild(c),c=e.createElement$$module$build$src$core$utils$xml("field"),c.setAttribute("name","NAME"),d=this.getProcedureCall();const h=e.findLegalName$$module$build$src$core$procedures(d,this);d!==h&&this.renameProcedure(d,h),c.appendChild(e.createTextNode$$module$build$src$core$utils$xml(d)),i.appendChild(c),o.appendChild(i),e.domToWorkspace$$module$build$src$core$xml(o,this.workspace),e.setGroup$$module$build$src$core$events$utils(!1)}}else o.type===e.DELETE$$module$build$src$core$events$utils?(i=this.getProcedureCall(),e.getDefinition$$module$build$src$core$procedures(i,this.workspace)||(e.setGroup$$module$build$src$core$events$utils(o.group),this.dispose(!0),e.setGroup$$module$build$src$core$events$utils(!1))):o.type===e.CHANGE$$module$build$src$core$events$utils&&o.element==="disabled"&&(i=this.getProcedureCall(),(d=e.getDefinition$$module$build$src$core$procedures(i,this.workspace))&&d.id===o.blockId&&((c=e.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),e.setGroup$$module$build$src$core$events$utils(o.group),o=d.isEnabled(),this.setDisabledReason(!o,w),this.setWarningText(o?null:e.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",i)),e.setGroup$$module$build$src$core$events$utils(c)))},customContextMenu:function(o){if(this.workspace.isMovable()){var i=this.getProcedureCall(),c=this.workspace;o.push({enabled:!0,text:e.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const d=e.getDefinition$$module$build$src$core$procedures(i,c);d&&(c.centerOnBlock(d.id),e.setSelected$$module$build$src$core$common(d))}})}}};Y.procedures_callnoreturn=Object.assign({},W,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),Y.procedures_callreturn=Object.assign({},W,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var ne="UNPARENTED_IFRETURN",Ce={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(e.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(e.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation");return o.setAttribute("value",String(Number(this.hasReturnValue_))),o},domToMutation:function(o){this.hasReturnValue_=o.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(o){if(!(this.workspace.isDragging&&this.workspace.isDragging()||o.type!==e.MOVE$$module$build$src$core$events$utils&&o.type!==e.CREATE$$module$build$src$core$events$utils)){o=!1;var i=this;do{if(this.FUNCTION_TYPES.includes(i.type)){o=!0;break}i=i.getSurroundParent()}while(i);if(o?(i.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):i.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(e.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{e.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!o,ne)}finally{e.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};Y.procedures_ifreturn=Ce,e.defineBlocks$$module$build$src$core$common(Y);var Ms={blocks:Y},We=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),ks={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};e.register$$module$build$src$core$extensions("math_op_tooltip",e.buildTooltipForDropdown$$module$build$src$core$extensions("OP",ks));var Bs={mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation"),i=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return o.setAttribute("divisor_input",String(i)),o},domToMutation:function(o){o=o.getAttribute("divisor_input")==="true",this.updateShape_(o)},updateShape_:function(o){const i=this.getInput("DIVISOR");o?i||this.appendValueInput("DIVISOR").setCheck("Number"):i&&this.removeInput("DIVISOR")}},Ps=function(){this.getField("PROPERTY").setValidator(function(o){o=o==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(o)})};e.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",Bs,Ps),e.register$$module$build$src$core$extensions("math_change_tooltip",e.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var xs={updateType_:function(o){o==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation");return o.setAttribute("op",this.getFieldValue("OP")),o},domToMutation:function(o){if(o=o.getAttribute("op"),o===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(o)}},Ds=function(){this.getField("OP").setValidator((function(o){this.updateType_(o)}).bind(this))};e.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",xs,Ds),e.defineBlocks$$module$build$src$core$common(We);var ws={blocks:We},je=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),vs={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};e.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",e.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",vs));var Fs={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};e.register$$module$build$src$core$extensions("controls_flow_tooltip",e.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Fs));var Us={customContextMenu:function(o){if(!this.isInFlyout){var i=this.getField("VAR"),c=i.getVariable().name;this.isCollapsed()||c===null||(i={type:"variables_get",fields:{VAR:i.saveState(!0)}},o.push({enabled:!0,text:e.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",c),callback:e.callbackFactory$$module$build$src$core$contextmenu(this,i)}))}}};e.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Us),e.register$$module$build$src$core$extensions("controls_for_tooltip",e.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),e.register$$module$build$src$core$extensions("controls_forEach_tooltip",e.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var It=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),Hs="CONTROL_FLOW_NOT_IN_LOOP",Vs={getSurroundLoop:function(){let o=this;do{if(It.has(o.type))return o;o=o.getSurroundParent()}while(o);return null},onchange:function(o){const i=this.workspace;if(i.isDragging&&!i.isDragging()&&(o.type===e.MOVE$$module$build$src$core$events$utils||o.type===e.CREATE$$module$build$src$core$events$utils)&&(o=!!this.getSurroundLoop(),this.setWarningText(o?null:e.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{e.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!o,Hs)}finally{e.setRecordUndo$$module$build$src$core$events$utils(!0)}}};e.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",Vs),e.defineBlocks$$module$build$src$core$common(je);var Gs={blocks:je,loopTypes:It},qe=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Ys={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};e.register$$module$build$src$core$extensions("logic_op_tooltip",e.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Ys));var Ks={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const o=e.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&o.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&o.setAttribute("else","1"),o},domToMutation:function(o){this.elseifCount_=parseInt(o.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(o.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const o=Object.create(null);return this.elseifCount_&&(o.elseIfCount=this.elseifCount_),this.elseCount_&&(o.hasElse=!0),o},loadExtraState:function(o){this.elseifCount_=o.elseIfCount||0,this.elseCount_=o.hasElse?1:0,this.updateShape_()},decompose:function(o){const i=o.newBlock("controls_if_if");i.initSvg();let c=i.nextConnection;for(let d=1;d<=this.elseifCount_;d++){const h=o.newBlock("controls_if_elseif");h.initSvg(),c.connect(h.previousConnection),c=h.nextConnection}return this.elseCount_&&(o=o.newBlock("controls_if_else"),o.initSvg(),c.connect(o.previousConnection)),i},compose:function(o){o=o.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const i=[null],c=[null];let d=null;for(;o;){if(!o.isInsertionMarker())switch(o.type){case"controls_if_elseif":this.elseifCount_++,i.push(o.valueConnection_),c.push(o.statementConnection_);break;case"controls_if_else":this.elseCount_++,d=o.statementConnection_;break;default:throw TypeError("Unknown block type: "+o.type)}o=o.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(i,c,d)},saveConnections:function(o){o=o.nextConnection.targetBlock();let i=1;for(;o;){if(!o.isInsertionMarker())switch(o.type){case"controls_if_elseif":var c=this.getInput("IF"+i);const d=this.getInput("DO"+i);o.valueConnection_=c&&c.connection.targetConnection,o.statementConnection_=d&&d.connection.targetConnection,i++;break;case"controls_if_else":c=this.getInput("ELSE"),o.statementConnection_=c&&c.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+o.type)}o=o.getNextBlock()}},rebuildShape_:function(){const o=[null],i=[null];let c=null;this.getInput("ELSE")&&(c=this.getInput("ELSE").connection.targetConnection);for(let d=1;this.getInput("IF"+d);d++){const h=this.getInput("IF"+d),N=this.getInput("DO"+d);o.push(h.connection.targetConnection),i.push(N.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(o,i,c)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var o=1;this.getInput("IF"+o);o++)this.removeInput("IF"+o),this.removeInput("DO"+o);for(o=1;o<=this.elseifCount_;o++)this.appendValueInput("IF"+o).setCheck("Boolean").appendField(e.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+o).appendField(e.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(e.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(o,i,c){for(let d=1;d<=this.elseifCount_;d++){let h;(h=o[d])==null||h.reconnect(this,"IF"+d);let N;(N=i[d])==null||N.reconnect(this,"DO"+d)}c==null||c.reconnect(this,"ELSE")}};e.registerMutator$$module$build$src$core$extensions("controls_if_mutator",Ks,null,["controls_if_elseif","controls_if_else"]);var Xs=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return e.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return e.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return e.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return e.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};e.register$$module$build$src$core$extensions("controls_if_tooltip",Xs);var Ws={onchange:function(o){this.prevBlocks_||(this.prevBlocks_=[null,null]);var i=this.getInputTargetBlock("A");const c=this.getInputTargetBlock("B");i&&c&&!this.workspace.connectionChecker.doTypeChecks(i.outputConnection,c.outputConnection)&&(e.setGroup$$module$build$src$core$events$utils(o.group),o=this.prevBlocks_[0],o!==i&&(i.unplug(),!o||o.isDisposed()||o.isShadow()||this.getInput("A").connection.connect(o.outputConnection)),i=this.prevBlocks_[1],i!==c&&(c.unplug(),!i||i.isDisposed()||i.isShadow()||this.getInput("B").connection.connect(i.outputConnection)),this.bumpNeighbours(),e.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},js=function(){this.mixin(Ws)};e.register$$module$build$src$core$extensions("logic_compare",js);var qs={prevParentConnection_:null,onchange:function(o){const i=this.getInputTargetBlock("THEN"),c=this.getInputTargetBlock("ELSE"),d=this.outputConnection.targetConnection;if((i||c)&&d)for(let h=0;2>h;h++){const N=h===1?i:c;N&&!N.workspace.connectionChecker.doTypeChecks(N.outputConnection,d)&&(e.setGroup$$module$build$src$core$events$utils(o.group),d===this.prevParentConnection_?(this.unplug(),d.getSourceBlock().bumpNeighbours()):(N.unplug(),N.bumpNeighbours()),e.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=d}};e.registerMixin$$module$build$src$core$extensions("logic_ternary",qs),e.defineBlocks$$module$build$src$core$common(qe);var Js={blocks:qe},j=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),zs={init:function(){this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new e.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation");return o.setAttribute("items",String(this.itemCount_)),o},domToMutation:function(o){if(o=o.getAttribute("items"),!o)throw new TypeError("element did not have items");this.itemCount_=parseInt(o,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(o){this.itemCount_=o.itemCount,this.updateShape_()},decompose:function(o){const i=o.newBlock("lists_create_with_container");i.initSvg();let c=i.getInput("STACK").connection;for(let d=0;d<this.itemCount_;d++){const h=o.newBlock("lists_create_with_item");if(h.initSvg(),!h.previousConnection)throw Error("itemBlock has no previousConnection");c.connect(h.previousConnection),c=h.nextConnection}return i},compose:function(o){var i=o.getInputTargetBlock("STACK");for(o=[];i;)i.isInsertionMarker()||o.push(i.valueConnection_),i=i.getNextBlock();for(i=0;i<this.itemCount_;i++){const c=this.getInput("ADD"+i).connection.targetConnection;c&&!o.includes(c)&&c.disconnect()}for(this.itemCount_=o.length,this.updateShape_(),i=0;i<this.itemCount_;i++){let c;(c=o[i])==null||c.reconnect(this,"ADD"+i)}},saveConnections:function(o){o=o.getInputTargetBlock("STACK");let i=0;for(;o;){if(o.isInsertionMarker()){o=o.getNextBlock();continue}const c=this.getInput("ADD"+i);let d;o.valueConnection_=(d=c)==null?void 0:d.connection.targetConnection,o=o.getNextBlock(),i++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(e.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var o=0;o<this.itemCount_;o++)if(!this.getInput("ADD"+o)){const i=this.appendValueInput("ADD"+o).setAlign(e.Align$$module$build$src$core$inputs$align.RIGHT);o===0&&i.appendField(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(o=this.itemCount_;this.getInput("ADD"+o);o++)this.removeInput("ADD"+o)}};j.lists_create_with=zs;var Qs={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};j.lists_create_with_container=Qs;var Zs={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};j.lists_create_with_item=Zs;var eo={init:function(){var o=[[e.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[e.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),o=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:o}),!o)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(o,"END"),this.setInputsInline(!0),this.setTooltip(()=>e.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};j.lists_indexOf=eo;var to={init:function(){var o=[[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),o=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:o}),o.setValidator(function(i){i=i==="REMOVE",this.getSourceBlock().updateStatement_(i)}),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(o,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const i=this.getFieldValue("MODE"),c=this.getFieldValue("WHERE");let d="";switch(i+" "+c){case"GET FROM_START":case"GET FROM_END":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":d=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(c==="FROM_START"||c==="FROM_END")&&(d+="  "+(c==="FROM_START"?e.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),d})},mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation");o.setAttribute("statement",String(!this.outputConnection));const i=this.getInput("AT")instanceof e.ValueInput$$module$build$src$core$inputs$value_input;return o.setAttribute("at",String(i)),o},domToMutation:function(o){const i=o.getAttribute("statement")==="true";this.updateStatement_(i),o=o.getAttribute("at")!=="false",this.updateAt_(o)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(o){o.isStatement?this.updateStatement_(!0):typeof o=="string"&&this.domToMutation(e.textToDom$$module$build$src$core$utils$xml(o))},updateStatement_:function(o){o!==!this.outputConnection&&(this.unplug(!0,!0),o?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(o){this.removeInput("AT"),this.removeInput("ORDINAL",!0),o?(this.appendValueInput("AT").setCheck("Number"),e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const i=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});i.setValidator(function(c){const d=c==="FROM_START"||c==="FROM_END";if(d!==o){const h=this.getSourceBlock();return h.updateAt_(d),h.setFieldValue(c,"WHERE"),null}}),this.getInput("AT").appendField(i,"WHERE"),e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};j.lists_getIndex=to;var so={init:function(){var o=[[e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),o=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:o}),this.appendDummyInput().appendField(o,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const i=this.getFieldValue("MODE"),c=this.getFieldValue("WHERE");let d="";switch(i+" "+c){case"SET FROM_START":case"SET FROM_END":d=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":d=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":d=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":d=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":d=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":d=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":d=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":d=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(c==="FROM_START"||c==="FROM_END")&&(d+="  "+e.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),d})},mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation"),i=this.getInput("AT")instanceof e.ValueInput$$module$build$src$core$inputs$value_input;return o.setAttribute("at",String(i)),o},domToMutation:function(o){o=o.getAttribute("at")!=="false",this.updateAt_(o)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(o){this.removeInput("AT"),this.removeInput("ORDINAL",!0),o?(this.appendValueInput("AT").setCheck("Number"),e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const i=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});i.setValidator(function(c){const d=c==="FROM_START"||c==="FROM_END";if(d!==o){const h=this.getSourceBlock();return h.updateAt_(d),h.setFieldValue(c,"WHERE"),null}}),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(i,"WHERE")}};j.lists_setIndex=so;var oo={init:function(){this.WHERE_OPTIONS_1=[[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation");var i=this.getInput("AT1")instanceof e.ValueInput$$module$build$src$core$inputs$value_input;return o.setAttribute("at1",String(i)),i=this.getInput("AT2")instanceof e.ValueInput$$module$build$src$core$inputs$value_input,o.setAttribute("at2",String(i)),o},domToMutation:function(o){const i=o.getAttribute("at1")==="true";o=o.getAttribute("at2")==="true",this.updateAt_(1,i),this.updateAt_(2,o)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(o,i){this.removeInput("AT"+o),this.removeInput("ORDINAL"+o,!0),i?(this.appendValueInput("AT"+o).setCheck("Number"),e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+o).appendField(e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+o);const c=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+o]});c.setValidator(function(d){const h=d==="FROM_START"||d==="FROM_END";if(h!==i){const N=this.getSourceBlock();return N.updateAt_(o,h),N.setFieldValue(d,"WHERE"+o),null}}),this.getInput("AT"+o).appendField(c,"WHERE"+o),o===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};j.lists_getSublist=oo,j.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},j.lists_split={init:function(){const o=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[e.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[e.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!o)throw Error("field_dropdown not found");o.setValidator(i=>{this.updateType_(i)}),this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(o,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(e.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const i=this.getFieldValue("MODE");if(i==="SPLIT")return e.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(i==="JOIN")return e.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+i)})},updateType_:function(o){if(this.getFieldValue("MODE")!==o){const i=this.getInput("INPUT").connection;i.setShadowDom(null);const c=i.targetBlock();c&&(i.disconnect(),c.isShadow()?c.dispose(!1):this.bumpNeighbours())}o==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const o=e.createElement$$module$build$src$core$utils$xml("mutation");return o.setAttribute("mode",this.getFieldValue("MODE")),o},domToMutation:function(o){this.updateType_(o.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},e.defineBlocks$$module$build$src$core$common(j);var no={blocks:j},ro=Object.assign({},j,qe,je,We,Y,E,_,r),Ot={blocks:ro,lists:no,logic:Js,loops:Gs,math:ws,procedures:Ms,texts:ae,variables:R,variablesDynamic:m};return Ot.__namespace__=e,Ot})})(Rs);var Ua=Rs.exports;const Ir={...es.Zelos.blockStyles,defaultBlock1:{colourPrimary:"#B2DAFF",colourSecondary:"#F4F8FA",colourTertiary:"#2677C3"},defaultBlock2:{colourPrimary:"#67B6FF",colourSecondary:"F4F8FA",colourTertiary:"#2677C3"},defaultBlock3:{colourPrimary:"#4195E4",colourSecondary:"#F4F8FA",colourTertiary:"#2677C3"},defaultBlockCss:{colourPrimary:"#FFF3AD",colourSecondary:"#41505B",colourTertiary:"#FFE241"}},Ha=Mo.defineTheme("custom",{name:"custom",base:es.Classic,componentStyles:{workspaceBackgroundColour:"#fafafa",toolboxBackgroundColour:"blackBackground",flyoutBackgroundColour:"white",flyoutOpacity:1,scrollbarColour:"#000000",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.001,cursorColour:"#d0d0d0"},categoryStyles:_r,blockStyles:Ir});class St extends ko{position(){if(!this.isVisible()||!this.targetWorkspace.isVisible())return;const s=this.targetWorkspace.getToolbox(),n=7,e=0;if(!s)throw new Error("no toolbox");const r=s.getContentAreaMetrics();this.width_=r.width,this.height_=r.height,this.positionAt_(r.width-7,r.height-s.getContentHeight(),n,e)}hide(){}getFlyoutScale(){return 1}positionNewBlock(s,n){const e=this.targetWorkspace,r=this.svgGroup_;if(!r)throw new Error("flyout의 element를 찾을 수 없습니다.");const l=e.getOriginOffsetInPixels(),a=r.getBoundingClientRect(),u=e.getParentSvg().getBoundingClientRect(),m=this.workspace_.getCanvas().getAttribute("transform");if(!m)throw new Error("blocklyBlockCanvas에서 transform 값을 찾을 수 없습니다.");const _=new Se.Coordinate(a.x-u.x,a.y-u.y),p=this.getTranslate_(m);_.x=a.x-u.x,_.y=a.y-u.y+p.y;const T=s.getRelativeToSurfaceXY();T.scale(this.workspace_.scale);const y=Se.Coordinate.sum(_,T),R=Se.Coordinate.difference(y,l);R.scale(1/e.scale),n.moveTo(new Se.Coordinate(R.x,R.y))}getTranslate_(s){const n=s==null?void 0:s.match(/translate\(\s*[\d.-]+,\s*([\d.-]+)\)/);if(!n)throw new Error("일치하는 translate 값이 없습니다.");return{x:parseFloat(n[0]),y:parseFloat(n[1])}}}q(St,"registryName","FixedFlyout");const Or=t=>/^[a-zA-Z_-]/.test(t),Rr=t=>/^.[a-zA-Z0-9_-]*$/.test(t);class Ar extends Lo{constructor(s,n,e){super(String(s??""),n,e)}initView(){super.initView(),this.textElement_&&(this.textElement_.style.fill="#1E272E")}}class Q{static createElement(s,n,e){const r=document.createElement(s);for(const l in n)r.setAttribute(l,`${n[l]}`);return e&&e.appendChild(r),r}static createSvgElement(s,n,e){const r=document.createElementNS(this.SVG_NS,`${s}`);for(const l in n)r.setAttribute(l,`${n[l]}`);return e&&e.appendChild(r),r}static insertAfter(s,n){const e=n.nextElementSibling,r=n.parentNode;if(!r)throw Error("Reference node has no parent.");e?r.insertBefore(s,e):r.appendChild(s)}}q(Q,"SVG_NS","http://www.w3.org/2000/svg");const yr=t=>I.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},I.createElement("path",{d:"M19.7827 5.41406L18.2135 20.5834C18.0841 21.8339 17.1427 22.777 16.0239 22.777H7.37603C6.25719 22.777 5.31579 21.8339 5.18643 20.5834L3.61719 5.41406",stroke:"currentColor",strokeWidth:1.2}),I.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.41992 5.71342H21.5791H2.41992Z",stroke:"currentColor",strokeWidth:1.2,strokeLinejoin:"round"}),I.createElement("path",{d:"M9.00691 5.41406V4.01704C9.00691 2.47394 10.3472 1.223 12.0005 1.223C13.6539 1.223 14.9941 2.47394 14.9941 4.01704L14.9941 5.41406",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round"})),Lr=({workspaceId:t,title:s,thumbnail:n,lastEdited:e,onClick:r})=>{const{openModal:l,closeModal:a,setModalContent:u,setHandleModalCloseButton:m,setHandleModalConfirmButton:_}=jt(),{mutate:p}=Vr(),T=()=>{u(`${s}을(를)
      삭제하겠습니까?`),m(()=>{a()}),_(()=>{p(t)}),l()};return b.jsxs("li",{className:"shadow-drop relative overflow-hidden rounded-lg",children:[b.jsx("button",{className:"absolute right-2 top-2 text-gray-300 hover:text-red-500",onClick:T,children:b.jsx(yr,{width:16})}),b.jsxs("div",{className:"cursor-pointer",onClick:r,children:[b.jsx("div",{className:"flex h-[180px] overflow-hidden border-b border-gray-50 bg-gray-50",children:n&&b.jsx("img",{src:n,alt:"workspace thumbnail",className:"h-full w-full object-cover object-left-top",loading:"lazy"})}),b.jsxs("aside",{className:"p-4 pb-6",children:[b.jsx("h4",{className:"text-bold-md mb-1.5 text-gray-500",children:s}),b.jsx("p",{className:"text-medium-sm text-gray-200",children:yo(e)})]})]})]})};Lr.__docgenInfo={description:`@description
워크스페이스 아이템 컴포넌트`,methods:[],displayName:"WorkspaceItem",props:{workspaceId:{required:!0,tsType:{name:"string"},description:""},title:{required:!0,tsType:{name:"string"},description:""},thumbnail:{required:!0,tsType:{name:"string"},description:""},lastEdited:{required:!0,tsType:{name:"string"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Cr=t=>I.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},I.createElement("path",{d:"M20.5 8.5L12 17L3.5 8.5",stroke:"#222222",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round"})),Nr=t=>I.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},I.createElement("path",{d:"M3.5 15.5L12 7L20.5 15.5",stroke:"#222222",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round"}));var As=(t=>(t.SMALL="SMALL",t.MEDIUM="MEDIUM",t))(As||{});const ys=({id:t,options:s,value:n,onChange:e,placeholder:r="",size:l="MEDIUM",disabled:a=!1})=>{var ae,Y;const[u,m]=I.useState(!1),[_,p]=I.useState(n),[T,y]=I.useState("bottom"),[R,E]=I.useState(0),[f,g]=I.useState(!1),L=I.useRef(null),A=I.useRef(null),{screenHeight:M}=Cs();I.useEffect(()=>{p(n)},[n]),I.useEffect(()=>{const x=D=>{var ne,Ce;const w=(ne=L.current)==null?void 0:ne.contains(D.target),W=(Ce=A.current)==null?void 0:Ce.contains(D.target);!w&&!W&&m(!1)},X=D=>{var w;u&&((w=A.current)!=null&&w.contains(D.target)||m(!1))};return document.addEventListener("mousedown",x),document.addEventListener("scroll",X,!0),()=>{document.removeEventListener("mousedown",x),document.removeEventListener("scroll",X,!0)}},[u]),I.useEffect(()=>{if(u&&A.current){g(!1);const x=new ResizeObserver(X=>{const D=X[0].contentRect.height;if(D>0&&(E(D),L.current)){const w=L.current.getBoundingClientRect(),W=M-w.bottom,ne=w.top;y(W<D&&ne>D?"top":"bottom"),g(!0)}});return x.observe(A.current),()=>x.disconnect()}},[u,M]);const F=()=>{if(!a){if(u){m(!1);return}m(!0),y("bottom")}},C=x=>{p(x),e(x),m(!1)},P=x=>x.length===0?b.jsx(b.Fragment,{}):typeof x[0]=="string"?x.map(w=>b.jsx("li",{onClick:()=>C(w),className:`cursor-pointer rounded-lg px-4 py-2 hover:bg-yellow-200 ${w===_?"bg-yellow-500 text-gray-500":"text-gray-300"}`,children:w},w)):x.map(D=>b.jsx("li",{onClick:()=>C(D.value),className:`cursor-pointer rounded-lg px-4 py-2 hover:bg-yellow-200 ${D.value===_?"bg-yellow-500 text-gray-500":"text-gray-300"}`,children:D.label},D.value)),oe=((x,X)=>{var w;if(X.length===0)return r;if(typeof X[0]=="string"){const W=X;return W.find(ne=>ne===x)||W[0]}return((w=X.find(W=>W.value===x))==null?void 0:w.label)||r})(_,s);return b.jsxs("div",{className:`${l==="MEDIUM"?"w-52":"w-36"} relative text-ellipsis whitespace-nowrap`,ref:L,id:t||void 0,children:[b.jsx("button",{type:"button",onClick:F,disabled:a,className:"text-medium-md w-full rounded-lg border border-gray-100 bg-white px-4 py-1.5 text-left focus:outline-none disabled:border disabled:border-gray-100 disabled:bg-gray-50",children:b.jsxs("div",{className:"flex items-center justify-between gap-2",children:[b.jsx("span",{className:`${_?"text-gray-500":"text-gray-200"}`,children:oe}),u?b.jsx(Cr,{width:12}):b.jsx(Nr,{width:12})]})}),u&&ho.createPortal(b.jsx("div",{ref:A,className:"fixed z-[9999] min-w-24 rounded-lg border border-gray-100 bg-white shadow-lg transition-opacity duration-200",style:{left:L.current?`${L.current.getBoundingClientRect().left}px`:"0",top:T==="bottom"?`${(((ae=L.current)==null?void 0:ae.getBoundingClientRect().bottom)||0)+4}px`:`${(((Y=L.current)==null?void 0:Y.getBoundingClientRect().top)||0)-R-4}px`,opacity:f?1:0,visibility:f?"visible":"hidden"},children:b.jsx("ul",{className:"flex max-h-48 flex-col gap-1 overflow-y-auto px-2 py-2",children:P(s)})}),document.getElementById("dropdownDiv"))]})};ys.__docgenInfo={description:"",methods:[],displayName:"Select",props:{id:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"union",raw:"TOption[] | string[]",elements:[{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
  label: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"TOption[]"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},size:{required:!1,tsType:{name:"SelectSize"},description:"",defaultValue:{value:"SelectSize.MEDIUM",computed:!0}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const Mr=()=>{const{mutate:t}=ft(),{isPending:s}=$t(),n=()=>{t()};return b.jsx(pt,{width:"w-5",height:"h-5",onClick:n,disable:s,children:b.jsx(To,{width:"12",height:"12"})})};Mr.__docgenInfo={description:`@description
워크스페이스 추가 버튼 컴포넌트`,methods:[],displayName:"WorkspaceAddBtn"};const kr=()=>{const{mutate:t}=ft(!0),{isPending:s}=$t(),n=()=>{t()};return b.jsx("button",{onClick:n,className:"text-bold-rg rounded-full border border-gray-100 px-4 py-2 text-gray-400 transition-colors ease-in-out hover:border-gray-300 hover:bg-gray-50 hover:text-gray-300",disabled:s,children:s?b.jsx(_t,{width:4,height:4,backgroundColor:"gray200",foregroundColor:"grayWhite"}):b.jsx("p",{children:"예시 불러오기"})})};kr.__docgenInfo={description:`@description
Workspace 샘플을 생성하는 버튼입니다.`,methods:[],displayName:"WorkspaceSampleButton"};const Br=t=>I.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},I.createElement("path",{d:"M8.5 3.5L17 12L8.5 20.5",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round"})),Pr=()=>{const{workspace:t}=Re(),s=()=>{t!==null&&t.undo(!0)};return b.jsx(pt,{onClick:s,width:"w-[30px]",height:"h-[30px]",children:b.jsx(Br,{})})};Pr.__docgenInfo={description:`@description
워크스페이스 캔버스에서 redo 기능을 실행시키는 버튼입니다.`,methods:[],displayName:"RedoButton"};const xr=t=>I.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},I.createElement("path",{d:"M15.5 20.5L7 12L15.5 3.5",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round"})),Dr=()=>{const{workspace:t}=Re(),s=()=>{t!==null&&t.undo(!1)};return b.jsx(pt,{onClick:s,width:"w-[30px]",height:"h-[30px]",children:b.jsx(xr,{})})};Dr.__docgenInfo={description:`@description
워크스페이스 캔버스에서 undo 기능을 실행시키는 버튼입니다.`,methods:[],displayName:"UndoButton"};const wr=()=>{const t=zt().workspaceId,{mutate:s,isPending:n}=Gr(t),{totalCssPropertyObj:e}=he(),{workspace:r}=Re(),{isResetCssChecked:l}=xe(),[a,u]=I.useState(!1),m=async()=>{try{const _=Bo.workspaces.save(r);u(!0);const p=await Po();s({totalCssPropertyObj:e,canvas:_,classBlockList:Z.contents,cssResetStatus:l,thumbnail:p}),u(!1)}catch(_){_ instanceof Error&&H.error(_.message)}finally{u(!1)}};return b.jsx(b.Fragment,{children:b.jsx("button",{onClick:m,className:"text-bold-rg w-16 rounded-[30px] bg-green-500 py-2 text-green-100 hover:border hover:border-green-500 hover:bg-green-100 hover:text-green-500",disabled:n,children:n||a?b.jsx(_t,{width:4,height:4,backgroundColor:"gray200",foregroundColor:"grayWhite"}):b.jsx("p",{children:"저장"})})})};wr.__docgenInfo={description:`@description
Workspace 상태를 저장하는 버튼입니다.
저장 항목 : css 속성, 캔버스 블록 상태, css class 블록, css 리셋 여부, 미리보기 썸네일`,methods:[],displayName:"SaveButton"};const vr=()=>{const{workspaceId:t}=zt(),{mutate:s,isPending:n}=Hr(),{name:e}=Re(),[r,l]=I.useState("");I.useEffect(()=>{l(e)},[e]);const a=p=>{l(p)},u=p=>{p.target.value===e||p.target.value===""||s({workspaceId:t,newName:p.target.value})},m=p=>{p.key==="Enter"&&_(p)},_=p=>{p.currentTarget.blur(),!(e===p.currentTarget.value||p.currentTarget.value==="")&&(s({workspaceId:t,newName:p.currentTarget.value}),p.preventDefault())};return b.jsx(b.Fragment,{children:b.jsxs("div",{className:"relative flex items-center",children:[b.jsx("input",{placeholder:"이름을 입력해주세요",className:"placeholder:text-semibold-rg w-[272px] rounded-md border border-green-500 px-3 py-1 placeholder:text-gray-100 focus:outline-none",onBlur:u,onKeyDown:m,maxLength:20,disabled:n,value:r,onChange:p=>a(p.target.value)}),n&&b.jsx("div",{className:"absolute right-5",children:b.jsx(_t,{width:4,height:4,foregroundColor:"green500",backgroundColor:"gray200"})})]})})};vr.__docgenInfo={description:`@description
워크스페이스 이름을 수정할 수 있는 컴포넌트입니다.`,methods:[],displayName:"WorkspaceNameInput"};const Fr=({cssItem:t,index:s})=>{const{totalCssPropertyObj:n,currentCssClassName:e}=he(),{handleCssPropertyCheckboxChange:r,handleCssOptionChange:l,handleColorChange:a}=Ns(),{cssOptionValue:u,isHover:m,indexOfHover:_,isChecked:p,cssOption:T,handleMouseEnter:y,handleEnterKey:R,handleMouseLeave:E,handleChangeInputValue:f}=Kr(t),{leftX:g,topY:L}=Yr();return b.jsxs("div",{className:`flex h-[66px] w-full flex-shrink-0 items-center justify-between rounded-lg px-4 ${n[e]&&n[e].checkedCssPropertyObj[t.label]?"bg-yellow-500":"bg-gray-50"} `,children:[b.jsxs("div",{className:"flex items-center gap-5",children:[b.jsx("input",{type:"checkbox",checked:p,onChange:()=>r(t.label,p,T),title:t.label,className:"h-5 w-5 appearance-none rounded border border-gray-100 bg-center bg-no-repeat checked:bg-white checked:bg-[url('@/shared/assets/check.svg')]",disabled:e.length===0}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("p",{className:"text-semibold-md text-gray-black max-w-36 border-gray-100",children:t.label}),b.jsx(go,{onMouseEnter:A=>y(A,s),onMouseLeave:E}),b.jsx(Qt,{description:t.description,isOpen:m&&_===s,leftX:g,topY:L})]})]}),t.type==="select"&&b.jsx(ys,{id:t.label,options:t.option,value:T,onChange:A=>l(t.label,A),disabled:e.length===0,size:As.SMALL}),t.type==="input"&&b.jsx("input",{type:"text",className:"text-medium-md placeholder:text-medium-md w-36 rounded-lg border border-gray-100 px-4 py-1.5 text-gray-500 placeholder-gray-100 focus:border-gray-200 focus:outline-none disabled:border disabled:border-gray-100 disabled:bg-gray-50",placeholder:"값을 입력하세요",onBlur:A=>l(t.label,A.target.value),onKeyDown:A=>R(t.label,A),value:u,onChange:f,disabled:e.length===0}),t.type==="color"&&b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("p",{className:"text-medium-md text-gray-500",children:T}),b.jsx("input",{type:"color",title:T,onChange:A=>a(t.label,A.target.value),value:T,className:"h-5 w-5 cursor-pointer appearance-none bg-transparent",disabled:e.length===0})]})]})};Fr.__docgenInfo={description:`@description
CSS 속성을 선택할 수 있는 컴포넌트`,methods:[],displayName:"CssOptionItem",props:{cssItem:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  label: string;
  type: 'select' | 'input' | 'color';
  option?: string[];
  description: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'select' | 'input' | 'color'",elements:[{name:"literal",value:"'select'"},{name:"literal",value:"'input'"},{name:"literal",value:"'color'"}],required:!0}},{key:"option",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"description",value:{name:"string",required:!0}}]}},description:""},index:{required:!0,tsType:{name:"number"},description:""}}};let ot=null;const Xt=(t,s)=>{ot||(ot=fo(s)),ot.render(Qt(t))},Ur="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='mask0_921_1400'%20style='mask-type:alpha'%20maskUnits='userSpaceOnUse'%20x='0'%20y='0'%20width='16'%20height='16'%3e%3crect%20width='16'%20height='16'%20fill='%23D9D9D9'%20/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_921_1400)'%3e%3cpath%20d='M7.99826%2012.0006C8.22171%2012.0006%208.41121%2011.9234%208.56676%2011.7691C8.72232%2011.6149%208.8001%2011.426%208.8001%2011.2024C8.8001%2010.979%208.72293%2010.7895%208.5686%2010.6339C8.41438%2010.4784%208.22549%2010.4006%208.00193%2010.4006C7.77849%2010.4006%207.58899%2010.4778%207.43343%2010.6321C7.27788%2010.7863%207.2001%2010.9752%207.2001%2011.1988C7.2001%2011.4222%207.27726%2011.6117%207.4316%2011.7673C7.58582%2011.9228%207.77471%2012.0006%207.99826%2012.0006ZM8.00476%2014.4006C7.12388%2014.4006%206.29454%2014.2339%205.51676%2013.9006C4.73899%2013.5673%204.05843%2013.1089%203.4751%2012.5256C2.89176%2011.9423%202.43343%2011.2619%202.1001%2010.4846C1.76676%209.70725%201.6001%208.8767%201.6001%207.99292C1.6001%207.10914%201.76676%206.28114%202.1001%205.50892C2.43343%204.7367%202.89176%204.05892%203.4751%203.47559C4.05843%202.89225%204.73876%202.43392%205.5161%202.10059C6.29343%201.76725%207.12399%201.60059%208.00776%201.60059C8.89154%201.60059%209.71954%201.76725%2010.4918%202.10059C11.264%202.43392%2011.9418%202.89225%2012.5251%203.47559C13.1084%204.05892%2013.5668%204.73792%2013.9001%205.51259C14.2334%206.28736%2014.4001%207.11514%2014.4001%207.99592C14.4001%208.87681%2014.2334%209.70614%2013.9001%2010.4839C13.5668%2011.2617%2013.1084%2011.9423%2012.5251%2012.5256C11.9418%2013.1089%2011.2628%2013.5673%2010.4881%2013.9006C9.71332%2014.2339%208.88554%2014.4006%208.00476%2014.4006ZM8.0536%205.16725C8.32393%205.16725%208.56593%205.25159%208.7796%205.42025C8.99327%205.58892%209.1001%205.79975%209.1001%206.05275C9.1001%206.28464%209.0296%206.49503%208.8886%206.68392C8.74749%206.87281%208.58465%207.04503%208.4001%207.20059C8.14454%207.42281%207.91121%207.66725%207.7001%207.93392C7.48899%208.20059%207.38343%208.50059%207.38343%208.83392C7.38343%209.00059%207.44276%209.13947%207.56143%209.25059C7.6801%209.3617%207.81854%209.41725%207.97676%209.41725C8.15532%209.41725%208.3066%209.35892%208.4306%209.24225C8.55471%209.12559%208.63343%208.97836%208.66676%208.80059C8.71121%208.56725%208.81121%208.36092%208.96676%208.18159C9.12232%208.00236%209.28899%207.83125%209.46676%207.66825C9.72232%207.43425%209.93899%207.16897%2010.1168%206.87242C10.2945%206.57586%2010.3834%206.25747%2010.3834%205.91725C10.3834%205.35059%2010.1529%204.8867%209.69176%204.52559C9.23065%204.16447%208.69404%203.98392%208.08193%203.98392C7.65904%203.98392%207.25915%204.07836%206.88226%204.26725C6.50526%204.45614%206.19365%204.72986%205.94743%205.08842C5.86032%205.20853%205.83621%205.34059%205.8751%205.48459C5.91399%205.62859%205.99454%205.75059%206.11676%205.85059C6.27232%205.97281%206.43899%206.00892%206.61676%205.95892C6.79454%205.90892%206.94454%205.80614%207.06676%205.65059C7.18899%205.49503%207.33538%205.37559%207.50593%205.29225C7.67649%205.20892%207.85904%205.16725%208.0536%205.16725Z'%20fill='%2390A2B6'%20/%3e%3c/g%3e%3c/svg%3e";class Ls extends St{constructor(){super(...arguments);q(this,"pElement",null);q(this,"inputElement",null);q(this,"buttonElement",null)}init(n){super.init(n);const e=this.targetWorkspace.getToolbox(),r=Q.createElement("div",{class:"contentCreatingBlock"}),l=Q.createElement("label",{for:"creatingBlockInput",class:"creatingBlockLabel"});l.textContent="클래스 생성하기",this.inputElement=Q.createElement("input",{type:"text",placeholder:"클래스명을 정해주세요",class:"creatingBlockInput",id:"creatingBlockInput",maxlength:"30"}),this.inputElement.addEventListener("keydown",f=>{f.key==="Enter"&&this.createStyleBlock()});const a=Q.createElement("button",{class:"creatingBlockButton"});a.textContent="+",a.addEventListener("click",()=>this.createStyleBlock());const u=Q.createElement("label",{class:"listBlockLabel"});u.textContent="클래스 블록 목록";const m=Q.createElement("div",{class:"resetCssDiv"}),_=Q.createElement("input",{type:"checkbox",class:"resetCssCheckbox"});_.checked=xe.getState().isResetCssChecked,Ie.getState().setIsCssChanged(!0),_.addEventListener("change",()=>{xe.getState().toggleResetCss()});const p=Q.createElement("span",{class:"resetCssText"});p.textContent="reset CSS 적용하기";const T=Q.createElement("img",{src:Ur,alt:"reset CSS Info",class:"questionImage"}),y=document.createElement("div");document.body.appendChild(y);const R=()=>{const{left:f,top:g}=T.getBoundingClientRect();Xt({description:"브라우저마다 다른 기본 스타일을 일관되게 만들기 위해, 모든 요소의 기본 스타일을 초기화하는 CSS입니다.",isOpen:!0,leftX:f,topY:g},y)},E=()=>{Xt({description:"",isOpen:!1,leftX:0,topY:0},y)};T.addEventListener("mouseenter",R),T.addEventListener("mouseleave",E),m.appendChild(_),m.appendChild(p),m.appendChild(T),[l,this.inputElement,a,m,u].forEach(f=>r.appendChild(f)),e.addElementToContentArea(r,!0),this.registerCustomContextMenu(),this.show(Z.contents)}addPrefixToClassName(n){return`CSS_${n}`}registerCustomContextMenu(){const n="deleteBlock";if(Qe.registry.getItem(n))return;const e={id:n,scopeType:Qe.ScopeType.BLOCK,displayText:"블록 삭제",weight:100,preconditionFn:r=>{const l=r.block.type;return Z.contents.some(u=>u.type===l)&&r.block.isDeletable()?"enabled":"hidden"},callback:r=>{const l=r.block,a=l.type;Nt().getBlocksByType(a).forEach(T=>{T.dispose(!1,!0)}),l.dispose(!1,!0),he.getState().removeCssClass(a),Ie.getState().setIsBlockChanged(!0),Z.contents=Z.contents.filter(T=>T.type!==a);const{removeClassBlock:_}=At.getState();_(a),Nt().getToolbox().getFlyout().show(Z.contents),H.success(`"${a.replace("CSS_","")}" 클래스 블록이 삭제되었습니다.`)}};Qe.registry.register(e),document.addEventListener("click",r=>{const l=document.querySelector(".blocklyContextMenu");l&&!l.contains(r.target)&&(l.style.display="none")})}createStyleBlock(){var u;const n=(u=this.inputElement)==null?void 0:u.value;if(!n)return H.error("클래스명을 입력해주세요.");if(Or(n)){if(!Rr(n))return H.error("클래스명은 영문자, 밑줄(_), 하이픈(-), 숫자만 포함해주세요")}else return H.error("클래스명 첫 글자는 영문자, 밑줄(_), 하이픈(-)만 가능해요");const e=this.addPrefixToClassName(n),r=Z.contents||[];if(r.some(m=>m.type===e))return H.error(`"${n}" 입력한 클래스명 블록은 이미 존재합니다.`);Ct[e]||(he.getState().addNewCssClass(e),Ie.getState().setIsBlockChanged(!0),Ct[e]={init:function(){this.appendDummyInput().appendField(new Ar(n),"CLASS"),this.setOutput(!0),this.setStyle("defaultBlockCss")}}),Z.contents=[...r,{kind:"block",type:e,enabled:!0}];const{addClassBlock:a}=At.getState();a(e),this.show(Z.contents),H.success(`입력한 클래스명 블록 "${n}"이(가) 추가되었습니다.`),this.inputElement&&(this.inputElement.value="")}}q(Ls,"registryName","StyleFlyout");const Va={tabs:{html:{label:"HTML 태그",toolboxConfig:Sr,flyoutRegistryName:St.registryName},css:{label:"CSS 클래스",toolboxConfig:Z,flyoutRegistryName:Ls.registryName}},defaultSelectedTab:"html"},Hr=()=>{const t=Ae(),s=Xe(),n=ve()||Fe(),{setName:e}=Re(),{mutate:r,isPending:l}=Ue({mutationFn:({workspaceId:a,newName:u})=>s.updateWorkspaceName(n,a,u),onSuccess:a=>{H.success("워크스페이스 이름이 변경되었습니다."),e(a.name),t.invalidateQueries({queryKey:Ee.list()})},onError:()=>{H.error("워크스페이스 이름 변경을 실패했습니다.")}});return{mutate:r,isPending:l}},Vr=()=>{const t=Ae(),s=Xe(),n=ve()||Fe(),{closeModal:e,setIsLoading:r}=jt(),{mutate:l}=Ue({mutationFn:a=>(r(!0),s.deleteWorkspace(n,a)),onSuccess:()=>{t.invalidateQueries({queryKey:Ee.list()}),H.success("워크스페이스 삭제 성공")},onError:()=>{H.error("워크스페이스 삭제 실패")},onSettled:()=>{r(!1),e()}});return{mutate:l}},Ee={all:["workspace"],list:()=>[...Ee.all,"list"],detail:t=>[...Ee.all,"detail",t]},Gr=t=>{const s=Xe(),n=ve()||Fe(),e=Ae(),{resetChangedStatusState:r}=Ie(),{mutate:l,isPending:a}=Ue({mutationFn:({totalCssPropertyObj:u,canvas:m,classBlockList:_,cssResetStatus:p,thumbnail:T})=>s.saveWorkspace(n,t,u,m,_,p,T),onSuccess:()=>{r(),e.invalidateQueries({queryKey:Ee.list()}),H.success("성공적으로 저장되었습니다.")},onError:()=>{H.error("저장에 실패했습니다.")}});return{mutate:l,isPending:a}},Cs=()=>{const[t,s]=I.useState(window.innerWidth),[n,e]=I.useState(window.innerHeight);return I.useEffect(()=>{const r=Zt(()=>{s(window.innerWidth),e(window.innerHeight)},200);return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),{screenWidth:t,setScreenWidth:s,screenHeight:n,setScreenHeight:e}},Yr=()=>{const{leftX:t,topY:s,offsetX:n,offsetY:e,setLeftX:r,setTopY:l}=qt(),{screenWidth:a,screenHeight:u}=Cs();return I.useEffect(()=>{r(n),e+40>u?l(-e+40):l(e)},[n,e,a,u]),{leftX:t,topY:s}},Ns=()=>{const{setCheckedCssPropertyObj:t,setCssOptionObj:s,currentCssClassName:n}=he(),{setIsCssChanged:e}=Ie(),r=(u,m,_)=>{e(!0),t(n,u,!m),m||s(n,u,_)},l=(u,m)=>{e(!0),s(n,u,m)},a=I.useCallback(Zt((u,m)=>{l(u,m)},200),[l]);return{handleCssPropertyCheckboxChange:r,handleCssOptionChange:l,handleColorChange:a}},Kr=t=>{const{handleCssOptionChange:s}=Ns(),{setOffsetX:n,setOffsetY:e}=qt(),{currentCssClassName:r,totalCssPropertyObj:l,selectedCssCategory:a}=he(),[u,m]=I.useState(""),[_,p]=I.useState(!1),[T,y]=I.useState(-1),[R,E]=I.useState(!1),[f,g]=I.useState(t.type==="select"&&t.option.length>0?t.option[0]:"");return I.useEffect(()=>{l[r]&&m(l[r].cssOptionObj[t.label]||"")},[r,l,t.label]),I.useEffect(()=>{if(!l[r]){E(!1),g(t.type==="select"?t.option[0]:t.type==="color"?"#000000":"");return}if(E(l[r].checkedCssPropertyObj[t.label]??!1),!l[r].cssOptionObj[t.label]){g(t.type==="select"?t.option[0]:t.type==="color"?"#000000":"");return}g(l[r].cssOptionObj[t.label])},[l,r,t,a]),{cssOptionValue:u,isHover:_,indexOfHover:T,isChecked:R,cssOption:f,handleEnterKey:(C,P)=>{P.key==="Enter"&&(s(C,P.currentTarget.value),P.currentTarget.blur(),P.preventDefault())},handleMouseEnter:(C,P)=>{p(!0),y(P),n(C.currentTarget.getBoundingClientRect().x),e(C.currentTarget.getBoundingClientRect().y)},handleMouseLeave:()=>{p(!1),y(-1)},handleChangeInputValue:C=>{m(C.target.value)}}},Xr=()=>{const{mutate:t}=ft(),s=()=>{t()};return b.jsx("div",{className:"flex h-[23rem] items-center justify-center border-4 border-dashed border-green-300 bg-green-100",onClick:s,children:b.jsx(bo,{fill:"green"})})};Xr.__docgenInfo={description:`@description
빈 워크스페이스에 마우스를 올렸을 때 보여지는 컴포넌트`,methods:[],displayName:"HoveredEmptyWorkspace"};export{Bl as A,Ct as B,Fr as C,Q as D,jl as E,Ui as F,ce as G,Xr as H,Ta as I,Sr as J,Ha as K,Va as L,Bo as M,vi as N,pl as O,va as P,Fa as Q,Pr as R,wr as S,xl as T,Dr as U,Mr as W,Jl as Z,Lr as a,vr as b,kr as c,ys as d,Fe as e,Ar as f,ve as g,Z as h,Xe as i,wa as j,xa as k,ki as l,Cl as m,wo as n,St as o,Nl as p,Ql as q,Ca as r,Do as s,Yi as t,Se as u,Ao as v,Ee as w,ua as x,Ls as y,Da as z};
