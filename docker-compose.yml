# services:
#   base:
#     build:
#       context: .
#       dockerfile: Dockerfile.base
#     image: base-image
#     command: ['echo', 'Base image built']

#   client:
#     build:
#       context: .
#       dockerfile: ./apps/client/Dockerfile
#       cache_from:
#         - base-image
#     depends_on:
#       - base
#     ports:
#       - '80:80'

#   server:
#     build:
#       context: .
#       dockerfile: ./apps/server/Dockerfile
#       cache_from:
#         - base-image
#     depends_on:
#       - base
#     ports:
#       - '3000:3000'

services:
  frontend:
    build:
      context: .
      dockerfile: ./apps/client/Dockerfile
    ports:
      - '80:80'
    networks:
      - app-network

  backend:
    build:
      context: .
      dockerfile: ./apps/server/Dockerfile
    ports:
      - '8080:8080'
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
